# NagaAgent é¡¹ç›®ç»“æ„

æœ¬æ–‡æ¡£ä»‹ç» NagaAgent é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡ã€‚

---

## ğŸ“‚ æ ¹ç›®å½•ç»“æ„

```
NagaAgent/
â”œâ”€â”€ docs/                          # ğŸ“– æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ README.md                  # æ–‡æ¡£é¦–é¡µ
â”‚   â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md                # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”œâ”€â”€ åŠŸèƒ½æŒ‡å—.md                # åŠŸèƒ½ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ æ•…éšœæ’æŸ¥.md                # æ•…éšœæ’æŸ¥æŒ‡å—
â”‚   â”œâ”€â”€ å¸¸è§é—®é¢˜.md                # å¸¸è§é—®é¢˜ (FAQ)
â”‚   â”œâ”€â”€ æ›´æ–°æ—¥å¿—.md                # ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
â”‚   â””â”€â”€ é…ç½®æŒ‡å—/                  # é…ç½®æŒ‡å—ç›®å½•
â”‚       â”œâ”€â”€ é…ç½®æ€»è§ˆ.md            # é…ç½®é€‰é¡¹æ€»è§ˆ
â”‚       â”œâ”€â”€ BettaFishé…ç½®.md       # BettaFish é…ç½®
â”‚       â”œâ”€â”€ QQæœºå™¨äººé…ç½®.md        # QQ æœºå™¨äººé…ç½®
â”‚       â”œâ”€â”€ å¾®ä¿¡æœºå™¨äººé…ç½®.md      # å¾®ä¿¡æœºå™¨äººé…ç½®
â”‚       â”œâ”€â”€ è¯­éŸ³åŠŸèƒ½é…ç½®.md        # è¯­éŸ³åŠŸèƒ½é…ç½®
â”‚       â””â”€â”€ è®°å¿†ç³»ç»Ÿé…ç½®.md        # è®°å¿†ç³»ç»Ÿé…ç½®
â”‚
â”œâ”€â”€ scripts/                       # ğŸ¤– è„šæœ¬å·¥å…·ç›®å½•
â”‚   â”œâ”€â”€ README.md                  # è„šæœ¬å·¥å…·è¯´æ˜
â”‚   â”œâ”€â”€ configure_betta_fish.py    # BettaFish è‡ªåŠ¨é…ç½®è„šæœ¬
â”‚   â”œâ”€â”€ switch_database.py         # æ•°æ®åº“æ¨¡å¼åˆ‡æ¢è„šæœ¬
â”‚   â”œâ”€â”€ switch_sing_mode.py        # å”±æ­Œæ¨¡å¼åˆ‡æ¢è„šæœ¬
â”‚   â”œâ”€â”€ update_env_password.py     # æ›´æ–°ç¯å¢ƒå˜é‡å¯†ç 
â”‚   â”œâ”€â”€ init_betta_fish_db.py      # åˆå§‹åŒ– BettaFish æ•°æ®åº“
â”‚   â””â”€â”€ install_betta_fish_deps.py # å®‰è£… BettaFish ä¾èµ–
â”‚
â”œâ”€â”€ agentserver/                   # ğŸ¤– Agent æœåŠ¡ç›®å½•
â”‚   â”œâ”€â”€ agent_server.py           # Agent æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ config.py                 # Agent é…ç½®
â”‚   â””â”€â”€ ...                      # å…¶ä»– Agent ç›¸å…³æ–‡ä»¶
â”‚
â”œâ”€â”€ apiserver/                     # ğŸ”Œ API æœåŠ¡ç›®å½•
â”‚   â”œâ”€â”€ api_server.py             # API æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ message_manager.py        # æ¶ˆæ¯ç®¡ç†å™¨
â”‚   â”œâ”€â”€ web_interface.html        # Web ç•Œé¢
â”‚   â””â”€â”€ ...                      # å…¶ä»– API ç›¸å…³æ–‡ä»¶
â”‚
â”œâ”€â”€ mcpserver/                     # ğŸ”§ MCP æœåŠ¡ç›®å½•
â”‚   â”œâ”€â”€ mcp_server.py             # MCP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ mcp_scheduler.py          # MCP è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ agent_qq_wechat/         # QQ/WeChat Agent
â”‚   â”œâ”€â”€ agent_naga_portal/       # NagaPortal Agent
â”‚   â””â”€â”€ ...                      # å…¶ä»– MCP ç›¸å…³æ–‡ä»¶
â”‚
â”œâ”€â”€ system/                        # âš™ï¸ ç³»ç»Ÿæ ¸å¿ƒç›®å½•
â”‚   â”œâ”€â”€ config.py                 # ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ consciousness_engine.py  # åˆæ„è¯†å¼•æ“
â”‚   â”œâ”€â”€ prompts/                  # Prompt æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ conversation_style_prompt.txt      # å¯¹è¯é£æ ¼ Prompt
â”‚   â”‚   â”œâ”€â”€ conversation_analyzer_prompt.txt  # å¯¹è¯åˆ†æå™¨ Prompt
â”‚   â”‚   â”œâ”€â”€ consciousness_prompt.txt          # åˆæ„è¯† Prompt
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»– Prompt æ–‡ä»¶
â”‚   â”œâ”€â”€ semantic_analyzer.py     # è¯­ä¹‰åˆ†æå™¨
â”‚   â””â”€â”€ ...                      # å…¶ä»–ç³»ç»Ÿæ–‡ä»¶
â”‚
â”œâ”€â”€ ui/                           # ğŸ–¥ï¸ ç”¨æˆ·ç•Œé¢ç›®å½•
â”‚   â”œâ”€â”€ pyqt_chat_window.py       # PyQt ä¸»çª—å£
â”‚   â”œâ”€â”€ controller/               # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ tool_chat.py         # èŠå¤©å·¥å…·
â”‚   â”‚   â”œâ”€â”€ tool_document.py     # æ–‡æ¡£å·¥å…·
â”‚   â”‚   â”œâ”€â”€ tool_voice.py         # è¯­éŸ³å·¥å…·
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ components/              # UI ç»„ä»¶
â”‚   â”œâ”€â”€ img/                      # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ ...                      # å…¶ä»– UI æ–‡ä»¶
â”‚
â”œâ”€â”€ voice/                         # ğŸ¤ è¯­éŸ³å¤„ç†ç›®å½•
â”‚   â”œâ”€â”€ input/                    # è¯­éŸ³è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ voice_thread_safe_simple.py
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–è¾“å…¥æ–‡ä»¶
â”‚   â”œâ”€â”€ output/                   # è¯­éŸ³è¾“å‡º
â”‚   â”‚   â”œâ”€â”€ voice_integration.py
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–è¾“å‡ºæ–‡ä»¶
â”‚   â””â”€â”€ ...                      # å…¶ä»–è¯­éŸ³æ–‡ä»¶
â”‚
â”œâ”€â”€ game/                          # ğŸ® æ¸¸æˆç›¸å…³ç›®å½•
â”‚   â”œâ”€â”€ core/                     # æ¸¸æˆæ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ llm_adapter.py        # LLM é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–æ ¸å¿ƒæ–‡ä»¶
â”‚   â””â”€â”€ ...                      # å…¶ä»–æ¸¸æˆæ–‡ä»¶
â”‚
â”œâ”€â”€ summer_memory/                 # ğŸ’¾ è®°å¿†ç³»ç»Ÿç›®å½•
â”‚   â”œâ”€â”€ memory_manager.py         # è®°å¿†ç®¡ç†å™¨
â”‚   â”œâ”€â”€ task_manager.py           # ä»»åŠ¡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ quintuple_graph.py        # äº”å…ƒç»„å›¾
â”‚   â””â”€â”€ ...                      # å…¶ä»–è®°å¿†æ–‡ä»¶
â”‚
â”œâ”€â”€ betta-fish-main/               # ğŸ“Š BettaFish èˆ†æƒ…åˆ†æç›®å½•
â”‚   â”œâ”€â”€ app.py                    # BettaFish ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ config.py                 # BettaFish é…ç½®
â”‚   â”œâ”€â”€ .env                      # ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ InsightEngine/            # æ·±åº¦åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ MediaEngine/              # åª’ä½“åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ QueryEngine/              # æŸ¥è¯¢å¼•æ“
â”‚   â”œâ”€â”€ ReportEngine/             # æŠ¥å‘Šå¼•æ“
â”‚   â”œâ”€â”€ ForumEngine/               # è®ºå›æƒ…æ„Ÿå¼•æ“
â”‚   â”œâ”€â”€ KeywordOptimizer/         # å…³é”®è¯ä¼˜åŒ–å¼•æ“
â”‚   â””â”€â”€ ...                      # å…¶ä»– BettaFish æ–‡ä»¶
â”‚
â”œâ”€â”€ mqtt_tool/                     # ğŸ“¡ MQTT ç‰©è”ç½‘å·¥å…·ç›®å½•
â”‚   â”œâ”€â”€ device_switch.py          # è®¾å¤‡æ§åˆ¶
â”‚   â””â”€â”€ ...                      # å…¶ä»– MQTT æ–‡ä»¶
â”‚
â”œâ”€â”€ logs/                          # ğŸ“ æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ ...                      # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ img/                           # ğŸ–¼ï¸ å›¾ç‰‡èµ„æºç›®å½•
â”‚   â””â”€â”€ ...                      # å›¾ç‰‡æ–‡ä»¶
â”‚
â”œâ”€â”€ lib/                           # ğŸ“š åº“æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ ...                      # åº“æ–‡ä»¶
â”‚
â”œâ”€â”€ hooks/                         # ğŸª Git Hooks ç›®å½•
â”‚   â””â”€â”€ ...                      # Hook æ–‡ä»¶
â”‚
â”œâ”€â”€ main.py                        # ğŸš€ ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.json                    # âš™ï¸ é…ç½®æ–‡ä»¶
â”œâ”€â”€ config.json.example           # ğŸ“‹ é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ requirements.txt               # ğŸ“¦ Python ä¾èµ–
â”œâ”€â”€ pyproject.toml                # ğŸ“¦ é¡¹ç›®é…ç½®
â”œâ”€â”€ uv.lock                       # ğŸ”’ uv é”æ–‡ä»¶
â”œâ”€â”€ setup.bat                     # ğŸ“¦ Windows å®‰è£…è„šæœ¬
â”œâ”€â”€ setup.sh                      # ğŸ“¦ Linux/macOS å®‰è£…è„šæœ¬
â”œâ”€â”€ setup.py                      # ğŸ“¦ Python å®‰è£…è„šæœ¬
â”œâ”€â”€ start.bat                     # ğŸš€ Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.sh                      # ğŸš€ Linux/macOS å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_all.bat                 # ğŸš€ å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”œâ”€â”€ update.bat                    # ğŸ”„ Windows æ›´æ–°è„šæœ¬
â”œâ”€â”€ update.py                     # ğŸ”„ Python æ›´æ–°è„šæœ¬
â”œâ”€â”€ update.sh                     # ğŸ”„ Linux/macOS æ›´æ–°è„šæœ¬
â”œâ”€â”€ clear.py                      # ğŸ§¹ æ¸…ç†è„šæœ¬
â”œâ”€â”€ build.py                      # ğŸ”¨ æ„å»ºè„šæœ¬
â”œâ”€â”€ README.md                     # ğŸ“– ä¸» README
â”œâ”€â”€ README_en.md                  # ğŸ“– è‹±æ–‡ README
â”œâ”€â”€ README_tw.md                  # ğŸ“– ç¹ä½“ä¸­æ–‡ README
â”œâ”€â”€ LICENSE                       # ğŸ“„ MIT è®¸å¯è¯
â””â”€â”€ AUTHORS.txt                   # ğŸ‘¥ ä½œè€…åˆ—è¡¨
```

---

## ğŸ“‚ ç›®å½•è¯´æ˜

### ğŸ“– docs/ - æ–‡æ¡£ç›®å½•

å­˜æ”¾æ‰€æœ‰æ–‡æ¡£æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š

- **å¿«é€Ÿå¼€å§‹** - 5 åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- **åŠŸèƒ½æŒ‡å—** - è¯¦ç»†åŠŸèƒ½ä»‹ç»
- **é…ç½®æŒ‡å—** - æ‰€æœ‰é…ç½®é€‰é¡¹è¯´æ˜
- **æ•…éšœæ’æŸ¥** - è§£å†³å¸¸è§é—®é¢˜
- **å¸¸è§é—®é¢˜** - FAQ
- **æ›´æ–°æ—¥å¿—** - ç‰ˆæœ¬æ›´æ–°è®°å½•

### ğŸ¤– scripts/ - è„šæœ¬å·¥å…·ç›®å½•

å­˜æ”¾å„ç§ç®¡ç†å’Œé…ç½®è„šæœ¬ï¼š

- **configure_betta_fish.py** - è‡ªåŠ¨é…ç½® BettaFish
- **switch_database.py** - åˆ‡æ¢æ•°æ®åº“æ¨¡å¼
- **switch_sing_mode.py** - åˆ‡æ¢å”±æ­Œæ¨¡å¼
- **update_env_password.py** - æ›´æ–°ç¯å¢ƒå˜é‡å¯†ç 

### ğŸ”Œ apiserver/ - API æœåŠ¡ç›®å½•

FastAPI æœåŠ¡å™¨ï¼Œæä¾› Web API å’Œ Web ç•Œé¢ã€‚

### ğŸ¤– agentserver/ - Agent æœåŠ¡ç›®å½•

Agent æœåŠ¡å™¨ï¼Œå¤„ç† AI å¯¹è¯é€»è¾‘ã€‚

### ğŸ”§ mcpserver/ - MCP æœåŠ¡ç›®å½•

MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨ï¼Œç®¡ç†å·¥å…·è°ƒç”¨ã€‚

### âš™ï¸ system/ - ç³»ç»Ÿæ ¸å¿ƒç›®å½•

ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬é…ç½®ã€Promptã€è¯­ä¹‰åˆ†æç­‰ã€‚

### ğŸ–¥ï¸ ui/ - ç”¨æˆ·ç•Œé¢ç›®å½•

PyQt5 å›¾å½¢ç•Œé¢ç›¸å…³æ–‡ä»¶ã€‚

### ğŸ¤ voice/ - è¯­éŸ³å¤„ç†ç›®å½•

è¯­éŸ³è¾“å…¥å’Œè¾“å‡ºå¤„ç†ï¼Œæ”¯æŒå¤šç§ TTS å¼•æ“ã€‚

### ğŸ® game/ - æ¸¸æˆç›¸å…³ç›®å½•

æ¸¸æˆç›¸å…³çš„åŠŸèƒ½å’Œé€»è¾‘ã€‚

### ğŸ’¾ summer_memory/ - è®°å¿†ç³»ç»Ÿç›®å½•

GRAGï¼ˆGraph Retrieval Augmented Generationï¼‰è®°å¿†ç³»ç»Ÿï¼ŒåŸºäº Neo4jã€‚

### ğŸ“Š betta-fish-main/ - BettaFish èˆ†æƒ…åˆ†æç›®å½•

å¤šæ™ºèƒ½ä½“èˆ†æƒ…åˆ†æç³»ç»Ÿï¼ŒåŒ…æ‹¬ 6 ä¸ªæ™ºèƒ½å¼•æ“ã€‚

### ğŸ“¡ mqtt_tool/ - MQTT ç‰©è”ç½‘å·¥å…·ç›®å½•

MQTT ç‰©è”ç½‘è®¾å¤‡æ§åˆ¶å·¥å…·ã€‚

---

## ğŸ“„ é‡è¦æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `main.py` | ä¸»ç¨‹åºå…¥å£ï¼Œå¯åŠ¨æ‰€æœ‰æœåŠ¡ |
| `config.json` | ä¸»é…ç½®æ–‡ä»¶ |
| `config.json.example` | é…ç½®æ–‡ä»¶æ¨¡æ¿ |
| `requirements.txt` | Python ä¾èµ–åˆ—è¡¨ |
| `pyproject.toml` | é¡¹ç›®é…ç½®æ–‡ä»¶ |
| `uv.lock` | uv ä¾èµ–é”æ–‡ä»¶ |
| `README.md` | é¡¹ç›®è¯´æ˜æ–‡æ¡£ |
| `LICENSE` | MIT è®¸å¯è¯ |

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### config.json

ä¸»é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰å¯é…ç½®é€‰é¡¹ï¼š

```json
{
  "api": {},              // LLM API é…ç½®
  "api_server": {},       // API æœåŠ¡å™¨é…ç½®
  "qq_wechat": {},        // QQ/WeChat é…ç½®
  "tts": {},              // TTS è¯­éŸ³é…ç½®
  "grag": {},             // è®°å¿†ç³»ç»Ÿé…ç½®
  "voice_realtime": {},   // å®æ—¶è¯­éŸ³é…ç½®
  "live2d": {},           // Live2D é…ç½®
  "naga_portal": {},     // NagaPortal é…ç½®
  "mqtt": {}              // MQTT ç‰©è”ç½‘é…ç½®
}
```

### betta-fish-main/.env

BettaFish ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
# API Keys
OPENAI_API_KEY=your_key
TAVILY_API_KEY=your_key

# Database
DB_HOST=127.0.0.1
DB_PORT=9902
DB_USER=root
DB_PASSWORD=Aa316316
```

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶

æ—¥å¿—å­˜å‚¨åœ¨ `logs/` ç›®å½•ä¸‹ï¼š

- `nagaagent.log` - ä¸»ç¨‹åºæ—¥å¿—
- `api_server.log` - API æœåŠ¡å™¨æ—¥å¿—
- `mcp_server.log` - MCP æœåŠ¡å™¨æ—¥å¿—
- `agent_server.log` - Agent æœåŠ¡å™¨æ—¥å¿—

---

## ğŸ—‘ï¸ ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜

ä»¥ä¸‹ç›®å½•å’Œæ–‡ä»¶å¯ä»¥å®‰å…¨åˆ é™¤ï¼š

- `logs/` - æ—¥å¿—æ–‡ä»¶ï¼ˆå¯å®šæœŸæ¸…ç†ï¼‰
- `.venv/` - è™šæ‹Ÿç¯å¢ƒï¼ˆé‡æ–°å®‰è£…æ—¶ä¼šåˆ›å»ºï¼‰
- `__pycache__/` - Python ç¼“å­˜
- `.pytest_cache/` - Pytest ç¼“å­˜

---

## ğŸ“š æ‰©å±•é˜…è¯»

- [å¿«é€Ÿå¼€å§‹](docs/å¿«é€Ÿå¼€å§‹.md)
- [åŠŸèƒ½æŒ‡å—](docs/åŠŸèƒ½æŒ‡å—.md)
- [é…ç½®æŒ‡å—](docs/é…ç½®æŒ‡å—/é…ç½®æ€»è§ˆ.md)
- [è„šæœ¬å·¥å…·è¯´æ˜](scripts/README.md)

---

**æœ€åæ›´æ–°ï¼š2026-01-25**
