# NagaAgent é…ç½®æ€»è§ˆ

æœ¬æŒ‡å—ä»‹ç» NagaAgent çš„æ‰€æœ‰é…ç½®é€‰é¡¹ã€‚

---

## ğŸ“‹ é…ç½®æ–‡ä»¶

æ‰€æœ‰é…ç½®å­˜å‚¨åœ¨ `config.json` æ–‡ä»¶ä¸­ã€‚

é…ç½®ç»“æ„å¦‚ä¸‹ï¼š

```json
{
  "api": {},              // LLM API é…ç½®
  "api_server": {},       // API æœåŠ¡å™¨é…ç½®
  "qq_wechat": {},        // QQ/WeChat é…ç½®
  "tts": {},              // TTS è¯­éŸ³é…ç½®
  "grag": {},             // è®°å¿†ç³»ç»Ÿé…ç½®
  "voice_realtime": {},   // å®æ—¶è¯­éŸ³é…ç½®
  "live2d": {},           // Live2D é…ç½®
  "naga_portal": {},     // NagaPortal é…ç½®
  "mqtt": {}              // MQTT ç‰©è”ç½‘é…ç½®
}
```

---

## æ ¸å¿ƒé…ç½®

### 1. LLM API é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `api_key` | string | âœ… | API å¯†é’¥ |
| `base_url` | string | âœ… | API åŸºç¡€åœ°å€ |
| `model` | string | âœ… | æ¨¡å‹åç§° |
| `temperature` | float | âŒ | æ¸©åº¦å‚æ•° (0-2ï¼Œé»˜è®¤ 0.7) |
| `max_tokens` | int | âŒ | æœ€å¤§ token æ•° (é»˜è®¤ 4000) |
| `applied_proxy` | bool | âŒ | æ˜¯å¦å¯ç”¨ä»£ç† (é»˜è®¤ false) |

**ç¤ºä¾‹**ï¼š

```json
{
  "api": {
    "api_key": "sk-xxxxxxxxxx",
    "base_url": "https://api.deepseek.com/v1",
    "model": "deepseek-chat",
    "temperature": 0.7,
    "max_tokens": 4000,
    "applied_proxy": false
  }
}
```

### 2. API æœåŠ¡å™¨é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨ (é»˜è®¤ true) |
| `host` | string | âŒ | ç›‘å¬åœ°å€ (é»˜è®¤ "0.0.0.0") |
| `port` | int | âŒ | ç›‘å¬ç«¯å£ (é»˜è®¤ 8000) |
| `auto_start` | bool | âŒ | æ˜¯å¦è‡ªåŠ¨å¯åŠ¨ (é»˜è®¤ true) |

**ç¤ºä¾‹**ï¼š

```json
{
  "api_server": {
    "enabled": true,
    "host": "0.0.0.0",
    "port": 8000,
    "auto_start": true
  }
}
```

---

## èŠå¤©é›†æˆé…ç½®

### QQ æœºå™¨äººé…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨ QQ |
| `adapter` | string | âŒ | é€‚é…å™¨ç±»å‹ (é»˜è®¤ "napcat-go") |
| `ws_url` | string | âŒ | WebSocket åœ°å€ |
| `http_url` | string | âŒ | HTTP åœ°å€ |
| `bot_qq` | string | âœ… | æœºå™¨äºº QQ å· |
| `enable_auto_reply` | bool | âŒ | æ˜¯å¦è‡ªåŠ¨å›å¤ (é»˜è®¤ true) |
| `reply_mode` | string | âŒ | å›å¤æ¨¡å¼ (text/voice/both) |
| `enable_voice` | bool | âŒ | æ˜¯å¦å¯ç”¨è¯­éŸ³ (é»˜è®¤ true) |
| `enable_group_reply` | bool | âŒ | æ˜¯å¦ç¾¤èŠå›å¤ (é»˜è®¤ true) |
| `group_reply_mode` | string | âŒ | ç¾¤èŠæ¨¡å¼ (at_only/intelligent/all/none) |
| `group_whitelist` | array | âŒ | ç¾¤ç™½åå• |
| `group_blacklist` | array | âŒ | ç¾¤é»‘åå• |
| `group_reply_keywords` | array | âŒ | å…³é”®è¯åˆ—è¡¨ |
| `group_reply_cooldown` | int | âŒ | å†·å´æ—¶é—´ï¼ˆç§’ï¼Œé»˜è®¤ 5ï¼‰ |

**ç¤ºä¾‹**ï¼š

```json
{
  "qq_wechat": {
    "qq": {
      "enabled": true,
      "adapter": "napcat-go",
      "ws_url": "ws://127.0.0.1:3001",
      "http_url": "http://127.0.0.1:3000",
      "bot_qq": "123456789",
      "enable_auto_reply": true,
      "reply_mode": "both",
      "enable_voice": true,
      "enable_group_reply": true,
      "group_reply_mode": "at_only",
      "group_whitelist": [],
      "group_blacklist": [],
      "group_reply_keywords": ["æœºå™¨äºº", "AI", "å¼¥å¨…"],
      "group_reply_cooldown": 5
    }
  }
}
```

### å¾®ä¿¡æœºå™¨äººé…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨å¾®ä¿¡ |
| `auto_login` | bool | âŒ | æ˜¯å¦è‡ªåŠ¨ç™»å½• (é»˜è®¤ true) |
| `enable_login_qrcode` | bool | âŒ | æ˜¯å¦æ˜¾ç¤ºäºŒç»´ç  (é»˜è®¤ true) |
| `enable_auto_reply` | bool | âŒ | æ˜¯å¦è‡ªåŠ¨å›å¤ (é»˜è®¤ true) |

**ç¤ºä¾‹**ï¼š

```json
{
  "qq_wechat": {
    "wechat": {
      "enabled": true,
      "auto_login": true,
      "enable_login_qrcode": true,
      "enable_auto_reply": true
    }
  }
}
```

---

## è¯­éŸ³é…ç½®

### TTS é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `default_engine` | string | âŒ | é»˜è®¤å¼•æ“ (gpt_sovits/edge/vits) |
| `gpt_sovits_url` | string | âŒ | GPT-SoVITS æœåŠ¡åœ°å€ |
| `gpt_sovits_ref_text` | string | âŒ | å‚è€ƒæ–‡æœ¬ |
| `gpt_sovits_ref_audio_path` | string | âŒ | å‚è€ƒéŸ³é¢‘è·¯å¾„ |
| `port` | int | âŒ | TTS æœåŠ¡ç«¯å£ (é»˜è®¤ 5048) |

**ç¤ºä¾‹**ï¼š

```json
{
  "tts": {
    "default_engine": "gpt_sovits",
    "gpt_sovits_url": "http://127.0.0.1:9880",
    "gpt_sovits_ref_text": "å‚è€ƒæ–‡æœ¬",
    "gpt_sovits_ref_audio_path": "å‚è€ƒéŸ³é¢‘è·¯å¾„",
    "port": 5048
  }
}
```

### å®æ—¶è¯­éŸ³é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨ (é»˜è®¤ true) |
| `voice_mode` | string | âŒ | è¯­éŸ³æ¨¡å¼ (windows/local) |
| `tts_voice` | string | âŒ | TTS å£°éŸ³ (é»˜è®¤ "zh-CN-XiaoyiNeural") |

**ç¤ºä¾‹**ï¼š

```json
{
  "voice_realtime": {
    "enabled": true,
    "voice_mode": "windows",
    "tts_voice": "zh-CN-XiaoyiNeural"
  }
}
```

---

## è®°å¿†ç³»ç»Ÿé…ç½®

### GRAG é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨ (é»˜è®¤ false) |
| `neo4j_uri` | string | âŒ | Neo4j åœ°å€ |
| `neo4j_user` | string | âŒ | Neo4j ç”¨æˆ·å |
| `neo4j_password` | string | âŒ | Neo4j å¯†ç  |

**ç¤ºä¾‹**ï¼š

```json
{
  "grag": {
    "enabled": true,
    "neo4j_uri": "neo4j://127.0.0.1:7687",
    "neo4j_user": "neo4j",
    "neo4j_password": "your_password"
  }
}
```

---

## å…¶ä»–é…ç½®

### Live2D é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨ (é»˜è®¤ false) |
| `model_path` | string | âŒ | æ¨¡å‹è·¯å¾„ |
| `fallback_image` | string | âŒ | å¤‡ç”¨å›¾ç‰‡è·¯å¾„ |
| `auto_switch` | bool | âŒ | æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢ (é»˜è®¤ true) |
| `animation_enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨åŠ¨ç”» (é»˜è®¤ true) |
| `touch_interaction` | bool | âŒ | æ˜¯å¦å¯ç”¨è§¦æ‘¸äº¤äº’ (é»˜è®¤ true) |

**ç¤ºä¾‹**ï¼š

```json
{
  "live2d": {
    "enabled": false,
    "model_path": "ui/live2d_local/live2d_models/é‡éŸ³ãƒ†ãƒˆ/é‡éŸ³ãƒ†ãƒˆ.model3.json",
    "fallback_image": "ui/img/standby.png",
    "auto_switch": true,
    "animation_enabled": true,
    "touch_interaction": true
  }
}
```

### NagaPortal é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `portal_url` | string | âŒ | NagaPortal åœ°å€ |
| `username` | string | âŒ | ç”¨æˆ·å |
| `password` | string | âŒ | å¯†ç  |

### MQTT ç‰©è”ç½‘é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `enabled` | bool | âŒ | æ˜¯å¦å¯ç”¨ (é»˜è®¤ false) |
| `broker` | string | âŒ | Broker åœ°å€ |
| `port` | int | âŒ | Broker ç«¯å£ (é»˜è®¤ 1883) |
| `username` | string | âŒ | MQTT ç”¨æˆ·å |
| `password` | string | âŒ | MQTT å¯†ç  |

---

## é…ç½®ä¼˜å…ˆçº§

1. ç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼
2. è¿è¡Œæ—¶ä¿®æ”¹ > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼

---

## å¸¸è§é…ç½®æ¨¡æ¿

### æœ€å°é…ç½®ï¼ˆä»…èŠå¤©ï¼‰

```json
{
  "api": {
    "api_key": "your_api_key",
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-4"
  }
}
```

### å®Œæ•´é…ç½®ï¼ˆæ‰€æœ‰åŠŸèƒ½ï¼‰

```json
{
  "api": {
    "api_key": "your_api_key",
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-4"
  },
  "api_server": {
    "enabled": true,
    "host": "0.0.0.0",
    "port": 8000,
    "auto_start": true
  },
  "qq_wechat": {
    "qq": {
      "enabled": true,
      "bot_qq": "123456789",
      "http_url": "http://127.0.0.1:3000",
      "enable_auto_reply": true,
      "reply_mode": "both",
      "enable_voice": true
    },
    "wechat": {
      "enabled": false
    }
  },
  "tts": {
    "default_engine": "gpt_sovits",
    "gpt_sovits_url": "http://127.0.0.1:9880"
  },
  "grag": {
    "enabled": true,
    "neo4j_uri": "neo4j://127.0.0.1:7687",
    "neo4j_user": "neo4j",
    "neo4j_password": "your_password"
  }
}
```

---

## æ›´å¤šé…ç½®æŒ‡å—

- [QQ æœºå™¨äººé…ç½®](./QQæœºå™¨äººé…ç½®.md)
- [å¾®ä¿¡æœºå™¨äººé…ç½®](./å¾®ä¿¡æœºå™¨äººé…ç½®.md)
- [è¯­éŸ³åŠŸèƒ½é…ç½®](./è¯­éŸ³åŠŸèƒ½é…ç½®.md)
- [è®°å¿†ç³»ç»Ÿé…ç½®](./è®°å¿†ç³»ç»Ÿé…ç½®.md)
- [BettaFish é…ç½®](./BettaFishé…ç½®.md)
