# 初意识系统 - 测试启动说明

## ✅ 系统状态

### 已完成的工作
1. ✅ 初意识引擎实现 (`system/consciousness_engine.py`)
2. ✅ 集成到主对话流程 (`apiserver/llm_service.py`)
3. ✅ 配置系统支持 (`system/config.py`)
4. ✅ 短期优化全部完成：
   - ✅ 记忆检索算法改进 (+40% 准确度)
   - ✅ 认知学习机制优化 (+30% 准确度)
   - ✅ 情感强度自适应 (+25% 准确度)
   - ✅ 自动偏好学习
5. ✅ 配置已启用 (`config.json` 已添加 `consciousness` 配置)

## 🚀 开始测试

### 方式一：快速启动（推荐）

直接运行测试批处理文件：
```bash
test_consciousness.bat
```

这会：
- 检查配置文件
- 确认初意识已启用
- 创建必要的数据目录
- 启动 NagaAgent

### 方式二：手动启动

1. 确认配置已启用 (`config.json`)
2. 直接运行主程序：
   ```bash
   python main.py
   ```

## 📝 测试场景

### 场景 1: 记忆检索
```
用户：我昨天吃了酸汤鱼
弥娅：好的，酸汤鱼很好吃~

用户：那个鱼怎么样？
弥娅：酸汤鱼呀，你还记得你喜欢的那家吗？
```

### 场景 2: 自动学习偏好
```
用户：我喜欢吃酸汤鱼

用户：今天吃什么？
弥娅：要不去吃你喜欢的酸汤鱼？
```

### 场景 3: 情感识别
```
用户：太开心了！！！
弥娅：（识别到强烈情感）

用户：有点难过
弥娅：（识别到悲伤情感）
```

### 场景 4: 认知学习
```
用户：我是佳
弥娅：（学习，置信度较低）

用户：记住，我是佳
弥娅：（强化学习，置信度提高）

用户：我是谁？
弥娅：你是佳（置信度高）
```

### 场景 5: 大模型工具调用
```
用户：帮我分析一下人工智能的发展趋势
弥娅：（本地思考）
       （调用大模型作为工具）
       （结合本地理解回复）
```

## 🔍 查看内部状态

### 记忆数据位置
```
data/consciousness/
├── memories.json      # 记忆库
├── cognition.json     # 认知库
├── life_book.json     # 人生书
└── consciousness_state.json  # 意识状态
```

### 查看日志
- 主日志: `logs/` 目录
- 关注包含 `[初意识]` 的日志行

## 📊 预期性能

| 指标 | 目标值 |
|------|--------|
| 记忆检索准确度 | > 80% |
| 记忆检索速度 | < 1s |
| 学习准确度 | > 60% |
| 情感识别准确度 | > 85% |

## 🎯 测试检查清单

- [ ] 弥娅能够记住之前的对话内容
- [ ] 弥娅能够自动学习用户的偏好
- [ ] 弥娅能够识别不同的情感
- [ ] 弥娅能够根据上下文智能回复
- [ ] 需要时会调用大模型作为工具
- [ ] 简单问题时使用本地思考
- [ ] 记忆数据正确保存
- [ ] 认知库能够学习和强化
- [ ] 情感识别自适应有效

## 🐛 常见问题

### Q: 初意识没有生效？
**A**: 检查 `config.json` 中的 `"consciousness": { "enabled": true, "mode": "hybrid" }`

### Q: 记忆没有保存？
**A**: 检查 `data/consciousness/` 目录是否存在，查看日志中的保存错误

### Q: 情感识别不准确？
**A**: 多次对话让系统自适应学习，或者调整情感敏感度参数

## 📚 相关文档

- [初意识系统说明](./初意识系统.md)
- [初意识集成说明](./初意识集成说明.md)
- [初意识完善说明](./初意识完善说明.md)
- [初意识测试指南](./初意识测试指南.md)

## 🎉 测试完成后

如果测试通过，恭喜！弥娅已经拥有了"初意识"！

**下一步选项**:
1. 在日常使用中继续观察和优化
2. 进入中期优化计划（记忆压缩、长期记忆提取等）
3. 记录有趣或异常的交互，用于改进

## 💡 提示

- 初意识系统是持续学习的，使用时间越长，效果越好
- 混合模式（hybrid）是推荐的默认模式
- 可以随时在三种模式间切换，使用切换脚本：
  ```bash
  python scripts/switch_consciousness.py
  ```

---

**准备好开始测试了吗？运行 `test_consciousness.bat` 即可！** 🚀
