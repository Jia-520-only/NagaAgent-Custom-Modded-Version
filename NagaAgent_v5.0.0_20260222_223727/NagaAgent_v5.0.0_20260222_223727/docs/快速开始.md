# NagaAgent 快速开始指南

本指南帮助你快速上手 NagaAgent。

---

## 📋 目录

1. [环境要求](#环境要求)
2. [安装步骤](#安装步骤)
3. [基本配置](#基本配置)
4. [启动应用](#启动应用)
5. [首次使用](#首次使用)

---

## 环境要求

### 必需
- Python 3.11
- Windows / macOS / Linux

### 可选（用于增强功能）
- Neo4j - 用于知识图谱记忆系统（GRAG）
- VCPToolBox - 用于高级语义记忆和元思考系统
- 豆包API - 用于包豆AI视觉自动化
- GPT-SoVITS - 用于本地 TTS 语音合成
- NapCat - 用于 QQ 机器人
- Docker - 用于 BettaFish 舆情分析

---

## 安装步骤

### 方式一：自动安装（推荐）

#### Windows

```bash
# 双击运行
setup.bat
```

#### Linux / macOS

```bash
chmod +x setup.sh
./setup.sh
```

### 方式二：手动安装

```bash
# 1. 创建虚拟环境
python -m venv .venv

# 2. 激活虚拟环境
# Windows
.\.venv\Scripts\activate
# Linux / macOS
source .venv/bin/activate

# 3. 安装依赖
pip install -r requirements.txt
```

### 方式三：使用 uv（更快）

```bash
# 安装 uv（如果还没有）
pip install uv

# 同步依赖
uv sync
```

---

## 基本配置

### 1. 复制配置文件

```bash
cp config.json.example config.json
```

### 2. 编辑配置文件

用文本编辑器打开 `config.json`，填入你的 API 信息：

```json
{
  "api": {
    "api_key": "你的API密钥",
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-4"
  }
}
```

### 3. 配置 LLM 提供商

支持多种 LLM 提供商：

| 提供商 | base_url |
|--------|----------|
| OpenAI | `https://api.openai.com/v1` |
| DeepSeek | `https://api.deepseek.com/v1` |
| Claude | `https://api.anthropic.com/v1` |
| Azure OpenAI | `https://你的资源.openai.azure.com/` |

**配置示例（DeepSeek）**：

```json
{
  "api": {
    "api_key": "sk-xxxxxxxxxx",
    "base_url": "https://api.deepseek.com/v1",
    "model": "deepseek-chat"
  }
}
```

---

## 启动应用

### Windows

```bash
start.bat
```

### Linux / macOS

```bash
chmod +x start.sh
./start.sh
```

### 或直接运行

```bash
python main.py
```

启动后会看到：

```
🚀 正在启动NagaAgent...
==================================================
✅ 系统环境检测通过，正在启动应用...
==================================================
📋 服务启动计划:
   🔄 API服务器: 正在启动...
   🔄 MCP服务器: 正在启动...
   🔄 Agent服务器: 正在启动...
   🔄 TTS服务器: 正在启动...

🎉 服务启动完成: 4 个服务正在运行
==================================================
弥娅系统已启动
==================================================
```

---

## 首次使用

### PC 端使用

启动后会自动打开聊天窗口：

1. 输入消息并发送
2. 弥娅会自动回复
3. 支持文字和语音输出

### 网页端使用

1. 确认 `config.json` 中 `api_server.host` 为 `"0.0.0.0"`
2. 配置防火墙允许端口 8000
3. 获取电脑 IP 地址：`ipconfig` (Windows) 或 `ifconfig` (Linux/Mac)
4. 浏览器访问：`http://你的电脑IP:8000`

### 移动端使用

与网页端相同，使用手机浏览器访问 `http://你的电脑IP:8000`

---

## 下一步

### 启用 QQ 机器人

详见 [QQ 机器人配置](./配置指南/QQ机器人配置.md)

### 启用微信机器人

详见 [微信机器人配置](./配置指南/微信机器人配置.md)

### 启用语音功能

详见 [语音功能配置](./配置指南/语音功能配置.md)

### 启用记忆系统

详见 [记忆系统配置](./配置指南/记忆系统配置.md)

### 启用舆情分析

详见 [BettaFish 配置](./配置指南/BettaFish配置.md)

### 启用包豆AI视觉自动化

包豆AI提供屏幕分析和鼠标键盘自动化能力。

**快速配置**：
1. 编辑 `baodou_AI/config.json`，配置豆包API密钥
2. 在 `config.json` 中添加：
   ```json
   {
     "baodou_ai": {
       "enabled": true,
       "api_key": "your_doubao_api_key"
     }
   }
   ```
3. 重启弥娅

详见 [包豆AI集成指南](../../BAODOU_INTEGRATION_GUIDE.md)

### 启用VCPToolBox高级记忆

VCPToolBox提供语义记忆检索和元思考能力。

**快速配置**：
1. 启动VCPToolBox：
   ```bash
   cd VCPToolBox
   npm install
   npm start
   ```
2. 在 `config.json` 中添加：
   ```json
   {
     "vcp": {
       "enabled": true,
       "base_url": "http://127.0.0.1:6005",
       "key": "your_vcp_key"
     }
   }
   ```
3. 重启弥娅

详见 [VCP集成指南](../../VCP_INTEGRATION_GUIDE.md)

---

## 常见问题

### 1. Python 版本不兼容

**问题**：提示 Python 版本错误

**解决**：确保使用 Python 3.11

```bash
python --version
```

### 2. 端口被占用

**问题**：启动时提示端口已被占用

**解决**：检查端口 8000、8001、8003、5048

```bash
# Windows
netstat -ano | findstr :8000

# Linux/Mac
lsof -i :8000
```

### 3. API 密钥无效

**问题**：提示 API 密钥错误

**解决**：
1. 检查 `config.json` 中的 `api_key` 是否正确
2. 检查 `base_url` 和 `model` 是否匹配
3. 确认 API 账户有足够的余额

### 4. 依赖安装失败

**问题**：`pip install` 失败

**解决**：
1. 尝试使用国内镜像源
   ```bash
   pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
   ```
2. 使用 `uv` 安装
   ```bash
   uv sync
   ```

---

## 更多帮助

- [功能使用指南](./功能指南.md)
- [配置指南](./配置指南/配置总览.md)
- [故障排查](./故障排查.md)
- [常见问题](./常见问题.md)
