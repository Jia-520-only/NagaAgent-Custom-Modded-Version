{
  "type": "function",
  "function": {
    "name": "knowledge_semantic_search",
    "description": "语义检索（结构化紧凑输出），支持重排与结果后过滤。",
    "parameters": {
      "type": "object",
      "properties": {
        "knowledge_base": {
          "type": "string",
          "description": "知识库名称"
        },
        "query": {
          "type": "string",
          "description": "查询文本"
        },
        "top_k": {
          "type": "integer",
          "description": "语义召回数量，默认取知识库配置值"
        },
        "enable_rerank": {
          "type": "boolean",
          "description": "是否启用重排。不传时使用知识库默认配置"
        },
        "rerank_top_k": {
          "type": "integer",
          "description": "重排后返回数量，需小于语义召回数量"
        },
        "min_relevance": {
          "type": "number",
          "description": "最小相关度阈值（0-1），默认 0"
        },
        "source_keyword": {
          "type": "string",
          "description": "按 source 路径关键词过滤（不区分大小写）"
        },
        "max_chars_per_item": {
          "type": "integer",
          "description": "每条结果最大字符数，默认 220"
        },
        "include_rerank_score": {
          "type": "boolean",
          "description": "是否输出 rerank_score，默认 true"
        },
        "deduplicate": {
          "type": "boolean",
          "description": "按 source+text 去重，默认 true"
        }
      },
      "required": [
        "knowledge_base",
        "query"
      ]
    }
  }
}
