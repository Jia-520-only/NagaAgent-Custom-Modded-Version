# ğŸ“ Undefined é¡¹ç›®è¶…çº§å®Œæ•´å­¦ä¹ æŒ‡å—
## ä»é›¶å¼€å§‹ç²¾é€š Python å’Œè¿™ä¸ª QQ æœºå™¨äººé¡¹ç›®

---

## ğŸ“š ç›®å½•

1. [å­¦ä¹ å‰çš„å‡†å¤‡](#å­¦ä¹ å‰çš„å‡†å¤‡)
2. [ç¬¬ä¸€ç« :é¡¹ç›®æ˜¯ä»€ä¹ˆ](#ç¬¬ä¸€ç« é¡¹ç›®æ˜¯ä»€ä¹ˆ)
3. [ç¬¬äºŒç« :ç¨‹åºå¦‚ä½•è¿è¡Œ](#ç¬¬äºŒç« ç¨‹åºå¦‚ä½•è¿è¡Œ)
4. [ç¬¬ä¸‰ç« :é…ç½®ç³»ç»Ÿè¯¦è§£](#ç¬¬ä¸‰ç« é…ç½®ç³»ç»Ÿè¯¦è§£)
5. [ç¬¬å››ç« :AIæ ¸å¿ƒç³»ç»Ÿ](#ç¬¬å››ç« aiæ ¸å¿ƒç³»ç»Ÿ)
6. [ç¬¬äº”ç« :æ¶ˆæ¯å¤„ç†æœºåˆ¶](#ç¬¬äº”ç« æ¶ˆæ¯å¤„ç†æœºåˆ¶)
7. [ç¬¬å…­ç« :æŠ€èƒ½ç³»ç»Ÿ](#ç¬¬å…­ç« æŠ€èƒ½ç³»ç»Ÿ)
8. [ç¬¬ä¸ƒç« :å­˜å‚¨ç³»ç»Ÿ](#ç¬¬ä¸ƒç« å­˜å‚¨ç³»ç»Ÿ)
9. [ç¬¬å…«ç« :å·¥å…·å’Œè¾…åŠ©æ¨¡å—](#ç¬¬å…«ç« å·¥å…·å’Œè¾…åŠ©æ¨¡å—)
10. [ç¬¬ä¹ç« :Pythonæ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“](#ç¬¬ä¹ç« pythonæ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“)
11. [ç¬¬åç« :å®æˆ˜ç»ƒä¹ ](#ç¬¬åç« å®æˆ˜ç»ƒä¹ )

---

## ğŸ¯ å­¦ä¹ å‰çš„å‡†å¤‡

### ä½ éœ€è¦ä»€ä¹ˆ?
- âœ… ä¸€å°ç”µè„‘(Windows/Mac/Linuxéƒ½å¯ä»¥)
- âœ… Python 3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- âœ… ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨(æ¨èVSCode)
- âœ… è¿™ä»½å­¦ä¹ æ–‡æ¡£

### å¦‚ä½•ä½¿ç”¨è¿™ä»½æ–‡æ¡£?
1. ğŸ“– æŒ‰é¡ºåºé˜…è¯»æ¯ä¸€ç« 
2. ğŸ’» åŠ¨æ‰‹å®è·µæ¯ç« çš„ä»£ç ç¤ºä¾‹
3. ğŸ¤” æ€è€ƒå’Œç†è§£æ¯ä¸ªæ¦‚å¿µ
4. âœ… å®Œæˆæ¯ç« çš„ç»ƒä¹ é¢˜

### å­¦ä¹ ç›®æ ‡
é€šè¿‡è¿™ä¸ªé¡¹ç›®,ä½ å°†å­¦ä¼š:
- âœ… Python åŸºç¡€è¯­æ³•
- âœ… é¢å‘å¯¹è±¡ç¼–ç¨‹
- âœ… å¼‚æ­¥ç¼–ç¨‹(async/await)
- âœ… ç½‘ç»œç¼–ç¨‹(HTTP/WebSocket)
- âœ… é…ç½®ç®¡ç†
- âœ… AI API è°ƒç”¨
- âœ… æ¨¡å—åŒ–è®¾è®¡
- âœ… é¡¹ç›®å®æˆ˜ç»éªŒ

---

## ç¬¬ä¸€ç« :é¡¹ç›®æ˜¯ä»€ä¹ˆ

### 1.1 Undefined æ˜¯ä»€ä¹ˆ?

**Undefined** æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„ QQ æœºå™¨äºº,å®ƒæœ‰å¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½:

#### ğŸ¤– æ ¸å¿ƒåŠŸèƒ½
1. **æ™ºèƒ½å¯¹è¯** - ä½¿ç”¨ AI (å¦‚ DeepSeekã€Claudeã€GPT) å’Œç”¨æˆ·èŠå¤©
2. **æœç´¢èƒ½åŠ›** - å¯ä»¥æœç´¢ç½‘ç»œä¿¡æ¯
3. **å†™ä»£ç ** - å¯ä»¥å¸®ä½ å†™ä»£ç ã€åˆ†æä»£ç 
4. **æ–‡ä»¶åˆ†æ** - å¯ä»¥åˆ†æ PDFã€Wordã€Excelã€PPT ç­‰æ–‡ä»¶
5. **çŸ¥è¯†åº“** - å¯ä»¥å­˜å‚¨å’ŒæŸ¥è¯¢çŸ¥è¯†
6. **å®šæ—¶ä»»åŠ¡** - å¯ä»¥è®¾ç½®å®šæ—¶æé†’
7. **Bç«™è§†é¢‘** - è‡ªåŠ¨ä¸‹è½½ B ç«™è§†é¢‘
8. **å¤šæ¨¡æ€** - ç†è§£å›¾ç‰‡å†…å®¹

#### ğŸ—ï¸ æŠ€æœ¯ç‰¹ç‚¹
- **å¼‚æ­¥æ¶æ„** - å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚
- **æ¨¡å—åŒ–è®¾è®¡** - ä»£ç ç»„ç»‡æ¸…æ™°,æ˜“äºæ‰©å±•
- **é…ç½®çƒ­æ›´æ–°** - ä¿®æ”¹é…ç½®åä¸éœ€è¦é‡å¯
- **å·¥å…·ç³»ç»Ÿ** - å¯ä»¥è½»æ¾æ·»åŠ æ–°åŠŸèƒ½
- **æ™ºèƒ½ Agent** - æœ‰å¤šä¸ªä¸“é—¨çš„åŠ©æ‰‹åˆ†å·¥åä½œ

### 1.2 é¡¹ç›®ç»“æ„æ€»è§ˆ

```
Undefined/
â”œâ”€â”€ src/Undefined/          # ä¸»è¦æºä»£ç 
â”‚   â”œâ”€â”€ __main__.py         # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ main.py             # ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ config/             # é…ç½®ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ai/                 # AI æ ¸å¿ƒç³»ç»Ÿ
â”‚   â”œâ”€â”€ handlers.py         # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ onebot.py           # QQ åè®®è¿æ¥
â”‚   â”œâ”€â”€ skills/             # æŠ€èƒ½ç³»ç»Ÿ
â”‚   â”œâ”€â”€ services/           # æ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ webui/              # Web ç®¡ç†ç•Œé¢
â”‚   â”œâ”€â”€ bilibili/           # Bç«™è§†é¢‘å¤„ç†
â”‚   â””â”€â”€ knowledge/          # çŸ¥è¯†åº“
â”œâ”€â”€ config.toml             # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ config.toml.example     # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ data/                   # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ res/                    # èµ„æºæ–‡ä»¶
â””â”€â”€ docs/                   # æ–‡æ¡£
```

### 1.3 æ ¸å¿ƒæ¨¡å—ç®€ä»‹

| æ¨¡å— | ä½œç”¨ | é‡è¦ç¨‹åº¦ |
|------|------|----------|
| `main.py` | ç¨‹åºå…¥å£,å¯åŠ¨æ‰€æœ‰ç»„ä»¶ | â­â­â­â­â­ |
| `config/` | é…ç½®åŠ è½½å’Œç®¡ç† | â­â­â­â­â­ |
| `ai/` | AI å¯¹è¯å’Œå·¥å…·è°ƒç”¨ | â­â­â­â­â­ |
| `handlers.py` | æ¶ˆæ¯å¤„ç†å’Œè·¯ç”± | â­â­â­â­â­ |
| `onebot.py` | QQ åè®®è¿æ¥ | â­â­â­â­ |
| `skills/` | å·¥å…·å’Œ Agent | â­â­â­â­ |
| `services/` | é˜Ÿåˆ—ã€å‘½ä»¤ã€å®‰å…¨ | â­â­â­â­ |
| `utils/` | å·¥å…·å‡½æ•° | â­â­â­ |

---

## ç¬¬äºŒç« :ç¨‹åºå¦‚ä½•è¿è¡Œ

### 2.1 ç¨‹åºå¯åŠ¨æµç¨‹

å½“ä½ è¿è¡Œ `python -m Undefined` æ—¶,ä¼šå‘ç”Ÿä»€ä¹ˆ?

```
ç¬¬1æ­¥: æ‰§è¡Œ __main__.py
    â†“
ç¬¬2æ­¥: è°ƒç”¨ main.py çš„ run() å‡½æ•°
    â†“
ç¬¬3æ­¥: è¿è¡Œ asyncio.run(main())
    â†“
ç¬¬4æ­¥: æ‰§è¡Œ main() å¼‚æ­¥å‡½æ•°
    â”œâ”€ è®¾ç½®æ—¥å¿—ç³»ç»Ÿ
    â”œâ”€ åˆ›å»ºå¿…è¦çš„ç›®å½•
    â”œâ”€ æ£€æŸ¥ Git æ›´æ–°
    â”œâ”€ åŠ è½½é…ç½®æ–‡ä»¶
    â”œâ”€ åˆå§‹åŒ–æ ¸å¿ƒç»„ä»¶
    â”‚   â”œâ”€ OneBotClient (QQ è¿æ¥)
    â”‚   â”œâ”€ MemoryStorage (è®°å¿†å­˜å‚¨)
    â”‚   â”œâ”€ AIClient (AI å®¢æˆ·ç«¯)
    â”‚   â”œâ”€ MessageHandler (æ¶ˆæ¯å¤„ç†)
    â”‚   â””â”€ å…¶ä»–ç»„ä»¶...
    â”œâ”€ å¯åŠ¨é…ç½®çƒ­æ›´æ–°
    â””â”€ è¿æ¥ QQ å¹¶å¼€å§‹è¿è¡Œ
```

### 2.2 å…¥å£æ–‡ä»¶è¯¦è§£

#### æ–‡ä»¶1: `src/Undefined/__main__.py`

è¿™ä¸ªæ–‡ä»¶åªæœ‰6è¡Œä»£ç ,éå¸¸ç®€å•:

```python
"""å…è®¸ python -m Undefined è¿è¡Œ"""

from Undefined.main import run

if __name__ == "__main__":
    run()
```

**é€è¡Œè§£é‡Š**:

1. `"""å…è®¸ python -m Undefined è¿è¡Œ"""` - æ–‡æ¡£å­—ç¬¦ä¸²,è¯´æ˜è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨
2. `from Undefined.main import run` - ä» `Undefined.main` æ¨¡å—å¯¼å…¥ `run` å‡½æ•°
3. ç©ºè¡Œ - åˆ†éš”å¯¼å…¥å’Œä»£ç 
4. `if __name__ == "__main__":` - æ£€æŸ¥æ–‡ä»¶æ˜¯å¦è¢«ç›´æ¥è¿è¡Œ
5. `    run()` - å¦‚æœæ˜¯ç›´æ¥è¿è¡Œ,å°±è°ƒç”¨ `run()` å‡½æ•°

**çŸ¥è¯†ç‚¹**:
- `__name__` æ˜¯ Python çš„å†…ç½®å˜é‡
- å½“æ–‡ä»¶è¢«ç›´æ¥è¿è¡Œæ—¶,`__name__` çš„å€¼æ˜¯ `"__main__"`
- å½“æ–‡ä»¶è¢«å¯¼å…¥æ—¶,`__name__` çš„å€¼æ˜¯æ¨¡å—å
- è¿™è¡Œä»£ç ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œæ—¶æ‰æ‰§è¡Œ,å¯¼å…¥æ—¶ä¸ä¼šæ‰§è¡Œ

---

#### æ–‡ä»¶2: `src/Undefined/main.py`

è¿™æ˜¯ç¨‹åºçš„æ ¸å¿ƒå…¥å£æ–‡ä»¶,è®©æˆ‘ä»¬çœ‹çœ‹å…³é”®ä»£ç :

```python
import asyncio
import logging
import time
import sys
from pathlib import Path

from Undefined.ai import AIClient
from Undefined.config import get_config
from Undefined.onebot import OneBotClient
from Undefined.handlers import MessageHandler
# ... æ›´å¤šå¯¼å…¥ ...

def ensure_runtime_dirs() -> None:
    """ç¡®ä¿è¿è¡Œæ—¶ç›®å½•å­˜åœ¨"""
    runtime_dirs = [
        Path("data"),
        Path("data/history"),
        Path("data/faq"),
        Path("cache"),
        # ... æ›´å¤šç›®å½•
    ]
    for path in runtime_dirs:
        path.mkdir(parents=True, exist_ok=True)

def setup_logging() -> None:
    """è®¾ç½®æ—¥å¿—ç³»ç»Ÿ"""
    # åˆ›å»ºæ—¥å¿—å¤„ç†å™¨
    logger = logging.getLogger()
    logger.setLevel(logging.INFO)

    # æ–‡ä»¶å¤„ç†å™¨
    handler = logging.FileHandler("undefined.log")
    handler.setFormatter(logging.Formatter(
        "%(asctime)s [%(levelname)s] %(message)s"
    ))
    logger.addHandler(handler)

async def main() -> None:
    """ä¸»å‡½æ•°"""
    # æ­¥éª¤1: è®¾ç½®æ—¥å¿—
    setup_logging()

    # æ­¥éª¤2: åˆ›å»ºç›®å½•
    ensure_runtime_dirs()

    # æ­¥éª¤3: åŠ è½½é…ç½®
    try:
        config = get_config()
        logger.info(f"æœºå™¨äººQQ: {config.bot_qq}")
    except ValueError as exc:
        logger.error(f"é…ç½®é”™è¯¯: {exc}")
        sys.exit(1)

    # æ­¥éª¤4: åˆå§‹åŒ–ç»„ä»¶
    onebot = OneBotClient(config.onebot_ws_url, config.onebot_token)
    ai = AIClient(
        config.chat_model,
        config.vision_model,
        config.agent_model,
        bot_qq=config.bot_qq,
        runtime_config=config,
    )
    handler = MessageHandler(config, onebot, ai, ...)

    # æ­¥éª¤5: å¯åŠ¨è¿è¡Œ
    logger.info("æœºå™¨äººå·²å‡†å¤‡å°±ç»ª,å¼€å§‹è¿æ¥...")
    try:
        await onebot.run_with_reconnect()
    except KeyboardInterrupt:
        logger.info("æ”¶åˆ°é€€å‡ºä¿¡å·")
    finally:
        # æ¸…ç†èµ„æº
        await onebot.disconnect()
        await ai.close()

def run() -> None:
    """è¿è¡Œå…¥å£"""
    asyncio.run(main())

if __name__ == "__main__":
    run()
```

**å…³é”®æ¦‚å¿µè§£é‡Š**:

1. **å¼‚æ­¥å‡½æ•° (`async def`)**
   - `async def main()` å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥å‡½æ•°
   - å¼‚æ­¥å‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨ `await` ç­‰å¾…å¼‚æ­¥æ“ä½œ
   - é€‚åˆå¤„ç†ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶IOç­‰è€—æ—¶æ“ä½œ

2. **äº‹ä»¶å¾ªç¯ (`asyncio.run`)**
   - `asyncio.run(main())` å¯åŠ¨äº‹ä»¶å¾ªç¯
   - äº‹ä»¶å¾ªç¯è´Ÿè´£è°ƒåº¦å’Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡
   - å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œ

3. **è·¯å¾„æ“ä½œ (`pathlib.Path`)**
   - `Path("data")` åˆ›å»ºè·¯å¾„å¯¹è±¡
   - `path.mkdir(parents=True, exist_ok=True)` åˆ›å»ºç›®å½•
   - `parents=True` ä¼šåˆ›å»ºçˆ¶ç›®å½•
   - `exist_ok=True` å¦‚æœç›®å½•å·²å­˜åœ¨ä¸ä¼šæŠ¥é”™

4. **é”™è¯¯å¤„ç† (`try-except`)**
   - `try:` å°è¯•æ‰§è¡Œå¯èƒ½å‡ºé”™çš„ä»£ç 
   - `except ValueError:` æ•è·ç‰¹å®šé”™è¯¯
   - `finally:` æ— è®ºæ˜¯å¦å‡ºé”™éƒ½ä¼šæ‰§è¡Œ

5. **æ—¥å¿—è®°å½• (`logging`)**
   - `logger.info()` è®°å½•ä¿¡æ¯æ—¥å¿—
   - `logger.error()` è®°å½•é”™è¯¯æ—¥å¿—
   - `logger.warning()` è®°å½•è­¦å‘Šæ—¥å¿—

### 2.3 Python åŸºç¡€çŸ¥è¯†ç‚¹

#### çŸ¥è¯†ç‚¹1: å¯¼å…¥æ¨¡å—

```python
# æ–¹å¼1: å¯¼å…¥æ•´ä¸ªæ¨¡å—
import asyncio
asyncio.run(main())

# æ–¹å¼2: ä»æ¨¡å—å¯¼å…¥ç‰¹å®šå‡½æ•°
from pathlib import Path
path = Path("data")

# æ–¹å¼3: å¯¼å…¥å¹¶é‡å‘½å
import logging as log
log.info("ä¿¡æ¯")

# æ–¹å¼4: å¯¼å…¥å¤šä¸ª
from x import a, b, c
```

#### çŸ¥è¯†ç‚¹2: å‡½æ•°å®šä¹‰

```python
# æ— å‚æ•°å‡½æ•°
def hello():
    print("Hello!")

# æœ‰å‚æ•°å‡½æ•°
def greet(name):
    print(f"Hello, {name}!")

# æœ‰é»˜è®¤å€¼å‚æ•°
def greet(name, greeting="Hello"):
    print(f"{greeting}, {name}!")

# æœ‰è¿”å›å€¼
def add(a, b):
    return a + b

# å¼‚æ­¥å‡½æ•°
async def async_function():
    await asyncio.sleep(1)
    return "å®Œæˆ"
```

#### çŸ¥è¯†ç‚¹3: ç±»å‹æç¤º

```python
# åŸºæœ¬ç±»å‹
def add(a: int, b: int) -> int:
    return a + b

# å¯é€‰ç±»å‹(å¯èƒ½ä¸ºNone)
def get_user(id: int) -> dict | None:
    if id == 0:
        return None
    return {"id": id, "name": "User"}

# åˆ—è¡¨ç±»å‹
def process(items: list[str]) -> dict[str, int]:
    return {item: len(item) for item in items}

# å¤æ‚ç±»å‹
from typing import Optional, List, Dict

def search(
    query: str,
    limit: int = 10,
    filters: Optional[Dict[str, str]] = None
) -> List[Dict[str, Any]]:
    pass
```

---

## ç¬¬ä¸‰ç« :é…ç½®ç³»ç»Ÿè¯¦è§£

### 3.1 é…ç½®ç³»ç»Ÿæ¦‚è¿°

**é…ç½®ç³»ç»Ÿçš„ä½œç”¨**:
- è¯»å–é…ç½®æ–‡ä»¶
- éªŒè¯é…ç½®æœ‰æ•ˆæ€§
- æä¾›é…ç½®ç»™ç¨‹åºä½¿ç”¨
- æ”¯æŒé…ç½®çƒ­æ›´æ–°

### 3.2 é…ç½®æ–‡ä»¶æ ¼å¼

é¡¹ç›®ä½¿ç”¨ **TOML** æ ¼å¼çš„é…ç½®æ–‡ä»¶:

```toml
# æ³¨é‡Š: ä»¥ # å¼€å¤´

# æ ¸å¿ƒé…ç½®
[core]
bot_qq = 123456789              # æœºå™¨äººQQå·
superadmin_qq = 987654321       # è¶…çº§ç®¡ç†å‘˜
admin_qq = [111, 222, 333]     # ç®¡ç†å‘˜åˆ—è¡¨
process_every_message = true    # æ˜¯å¦å¤„ç†æ¯æ¡æ¶ˆæ¯

# è®¿é—®æ§åˆ¶
[access]
mode = "off"                    # è®¿é—®æ¨¡å¼
allowed_group_ids = []          # å…è®¸çš„ç¾¤å·
blocked_group_ids = []          # ç¦æ­¢çš„ç¾¤å·

# OneBoté…ç½®
[onebot]
ws_url = "ws://127.0.0.1:3001"  # WebSocketåœ°å€
token = ""                      # è®¿é—®ä»¤ç‰Œ

# AIæ¨¡å‹é…ç½®
[models.chat]
api_url = "https://api.openai.com/v1"
api_key = "sk-xxxxx"
model_name = "gpt-4"
max_tokens = 8192
```

**TOML åŸºæœ¬è¯­æ³•**:
- æ³¨é‡Šä»¥ `#` å¼€å¤´
- é”®å€¼å¯¹ç”¨ `=` è¿æ¥
- å­—ç¬¦ä¸²ç”¨åŒå¼•å·
- å¸ƒå°”å€¼æ˜¯ `true` æˆ– `false`
- åˆ—è¡¨ç”¨ `[]`
- åˆ†ç»„ç”¨ `[section]`

### 3.3 æ•°æ®ç±» (dataclass)

Python çš„ `dataclass` æ˜¯ä¸€ç§ç®€åŒ–ç±»å®šä¹‰çš„æ–¹å¼:

```python
from dataclasses import dataclass

# å®šä¹‰æ•°æ®ç±»
@dataclass
class Person:
    name: str
    age: int
    email: str = "unknown@example.com"  # é»˜è®¤å€¼

# ä½¿ç”¨
person = Person(name="å°æ˜", age=18)
print(person.name)  # å°æ˜
print(person.age)   # 18
print(person.email) # unknown@example.com (é»˜è®¤å€¼)
```

**å¯¹æ¯”æ™®é€šç±»**:

```python
# æ™®é€šç±»(éœ€è¦å†™å¾ˆå¤šä»£ç )
class Person:
    def __init__(self, name: str, age: int, email: str = "unknown@example.com"):
        self.name = name
        self.age = age
        self.email = email

    def __repr__(self):
        return f"Person(name={self.name!r}, age={self.age!r}, email={self.email!r})"

# dataclass(è‡ªåŠ¨ç”Ÿæˆ)
@dataclass
class Person:
    name: str
    age: int
    email: str = "unknown@example.com"
    # __init__ å’Œ __repr__ è‡ªåŠ¨ç”Ÿæˆ!
```

**é¡¹ç›®ä¸­çš„åº”ç”¨** - `config/models.py`:

```python
@dataclass
class ChatModelConfig:
    """å¯¹è¯æ¨¡å‹é…ç½®"""

    api_url: str
    api_key: str
    model_name: str
    max_tokens: int
    queue_interval_seconds: float = 1.0
    thinking_enabled: bool = False
    thinking_budget_tokens: int = 20000

@dataclass
class VisionModelConfig:
    """è§†è§‰æ¨¡å‹é…ç½®"""

    api_url: str
    api_key: str
    model_name: str
    queue_interval_seconds: float = 1.0
    thinking_enabled: bool = False
```

### 3.4 é…ç½®åŠ è½½å™¨

é…ç½®åŠ è½½å™¨çš„æ ¸å¿ƒæµç¨‹:

```
1. è¯»å– config.toml
    â†“
2. è§£æ TOML ä¸ºå­—å…¸
    â†“
3. è½¬æ¢ä¸º Config æ•°æ®ç±»
    â†“
4. éªŒè¯é…ç½®æœ‰æ•ˆæ€§
    â†“
5. è¿”å›é…ç½®å¯¹è±¡
```

**ç®€åŒ–ç‰ˆçš„é…ç½®åŠ è½½å™¨**:

```python
import toml
from pathlib import Path
from typing import Any

class ConfigLoader:
    """é…ç½®åŠ è½½å™¨"""

    def load(self, file_path: str) -> dict[str, Any]:
        """åŠ è½½é…ç½®æ–‡ä»¶"""
        path = Path(file_path)

        if not path.exists():
            raise FileNotFoundError(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {file_path}")

        with open(path, "r", encoding="utf-8") as f:
            config = toml.load(f)

        # éªŒè¯å¿…éœ€å­—æ®µ
        required_fields = ["core", "onebot", "models"]
        for field in required_fields:
            if field not in config:
                raise ValueError(f"é…ç½®ç¼ºå°‘å¿…éœ€å­—æ®µ: {field}")

        return config

# ä½¿ç”¨
loader = ConfigLoader()
config = loader.load("config.toml")
print(config["core"]["bot_qq"])
```

### 3.5 é…ç½®çƒ­æ›´æ–°

**ä»€ä¹ˆæ˜¯çƒ­æ›´æ–°?**
- ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹é…ç½®æ–‡ä»¶å˜åŒ–
- ä¸éœ€è¦é‡å¯ç¨‹åº
- è‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®

**å®ç°åŸç†**:

```python
import asyncio
from pathlib import Path

class ConfigWatcher:
    """é…ç½®æ–‡ä»¶ç›‘æ§å™¨"""

    def __init__(self, config_path: str, callback):
        self.config_path = Path(config_path)
        self.callback = callback
        self.last_mtime = self._get_mtime()

    def _get_mtime(self) -> float:
        """è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´"""
        return self.config_path.stat().st_mtime

    async def watch(self, interval: float = 1.0):
        """å¼€å§‹ç›‘æ§"""
        while True:
            await asyncio.sleep(interval)

            # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¿®æ”¹
            current_mtime = self._get_mtime()
            if current_mtime != self.last_mtime:
                print("æ£€æµ‹åˆ°é…ç½®å˜åŒ–,é‡æ–°åŠ è½½...")
                self.last_mtime = current_mtime

                # è°ƒç”¨å›è°ƒå‡½æ•°
                if self.callback:
                    self.callback()

# ä½¿ç”¨
async def on_config_changed():
    print("é…ç½®å·²æ›´æ–°!")
    # é‡æ–°åŠ è½½é…ç½®...

watcher = ConfigWatcher("config.toml", on_config_changed)
await watcher.watch()
```

### 3.6 å®æˆ˜ç»ƒä¹ 

**ç»ƒä¹ 1: åˆ›å»ºé…ç½®æ–‡ä»¶**

åˆ›å»º `my_config.toml`:

```toml
[app]
name = "MyApp"
version = "1.0.0"
debug = true

[server]
host = "127.0.0.1"
port = 8080

[database]
url = "sqlite:///app.db"
max_connections = 10
```

**ç»ƒä¹ 2: è¯»å–é…ç½®**

```python
import toml

# è¯»å–é…ç½®
with open("my_config.toml", "r", encoding="utf-8") as f:
    config = toml.load(f)

# è®¿é—®é…ç½®
print(f"åº”ç”¨åç§°: {config['app']['name']}")
print(f"æœåŠ¡å™¨åœ°å€: {config['server']['host']}:{config['server']['port']}")
print(f"æ•°æ®åº“URL: {config['database']['url']}")
```

**ç»ƒä¹ 3: åˆ›å»ºé…ç½®æ•°æ®ç±»**

```python
from dataclasses import dataclass

@dataclass
class AppConfig:
    name: str
    version: str
    debug: bool = False

@dataclass
class ServerConfig:
    host: str
    port: int = 8080

@dataclass
class DatabaseConfig:
    url: str
    max_connections: int = 10

# è½¬æ¢å­—å…¸ä¸ºæ•°æ®ç±»
app_config = AppConfig(**config['app'])
server_config = ServerConfig(**config['server'])
db_config = DatabaseConfig(**config['database'])

print(app_config.name)  # MyApp
print(server_config.port)  # 8080
```

---

## ç¬¬å››ç« :AIæ ¸å¿ƒç³»ç»Ÿ

### 4.1 AI ç³»ç»Ÿæ¶æ„

AI ç³»ç»Ÿçš„æ ¸å¿ƒæµç¨‹:

```
ç”¨æˆ·æ¶ˆæ¯
    â†“
AICoordinator åè°ƒå™¨
    â†“
PromptBuilder æ„å»ºæç¤ºè¯
    â”œâ”€ æ³¨å…¥å†å²æ¶ˆæ¯
    â”œâ”€ æ³¨å…¥é•¿æœŸè®°å¿†
    â”œâ”€ æ³¨å…¥çŸ¥è¯†åº“
    â””â”€ æ³¨å…¥ç³»ç»Ÿæç¤ºè¯
    â†“
ModelRequester è°ƒç”¨ AI API
    â†“
AI è¿”å›å›å¤ + å·¥å…·è°ƒç”¨
    â†“
ToolManager æ‰§è¡Œå·¥å…·
    â†“
è¿”å›æœ€ç»ˆç»“æœ
```

### 4.2 AIClient æ ¸å¿ƒç±»

`AIClient` æ˜¯ AI ç³»ç»Ÿçš„ä¸»å…¥å£:

```python
class AIClient:
    """AI æ¨¡å‹å®¢æˆ·ç«¯"""

    def __init__(
        self,
        chat_config: ChatModelConfig,
        vision_config: VisionModelConfig,
        agent_config: AgentModelConfig,
        memory_storage: Optional[MemoryStorage] = None,
        bot_qq: int = 0,
        runtime_config: Config | None = None,
    ):
        # ä¿å­˜é…ç½®
        self.chat_config = chat_config
        self.vision_config = vision_config
        self.agent_config = agent_config
        self.bot_qq = bot_qq

        # åˆå§‹åŒ–ç»„ä»¶
        self._http_client = httpx.AsyncClient(timeout=480.0)
        self._requester = ModelRequester(...)
        self.tool_manager = ToolManager(...)
        self.prompt_builder = PromptBuilder(...)

        # åˆå§‹åŒ–å·¥å…·æ³¨å†Œè¡¨
        self.tool_registry = ToolRegistry(...)
        self.agent_registry = AgentRegistry(...)

    async def process_message(self, message: str, context: dict) -> str:
        """å¤„ç†æ¶ˆæ¯"""
        # æ„å»ºæç¤ºè¯
        prompt = self.prompt_builder.build(message, context)

        # è°ƒç”¨AI
        response = await self._requester.chat(prompt)

        # å¤„ç†å·¥å…·è°ƒç”¨
        if response.tool_calls:
            result = await self.tool_manager.execute_tools(
                response.tool_calls
            )
            # å¯èƒ½éœ€è¦å†æ¬¡è°ƒç”¨AI
            response = await self._requester.chat(prompt + result)

        return response.text
```

### 4.3 PromptBuilder - æç¤ºè¯æ„å»ºå™¨

æç¤ºè¯æ„å»ºå™¨è´Ÿè´£ç»„åˆå„ç§ä¿¡æ¯:

```python
class PromptBuilder:
    """æç¤ºè¯æ„å»ºå™¨"""

    def build(self, message: str, context: dict) -> str:
        """æ„å»ºå®Œæ•´æç¤ºè¯"""

        # 1. ç³»ç»Ÿæç¤ºè¯
        system_prompt = self._load_system_prompt()

        # 2. å†å²æ¶ˆæ¯
        history = self._get_history(context)

        # 3. é•¿æœŸè®°å¿†
        memory = self._get_memory(context)

        # 4. çŸ¥è¯†åº“
        knowledge = self._search_knowledge(message)

        # 5. å·¥å…·æè¿°
        tools = self._get_tools_description()

        # 6. ç»„åˆæ‰€æœ‰å†…å®¹
        full_prompt = f"""
{system_prompt}

# ç›¸å…³çŸ¥è¯†
{knowledge}

# å†å²å¯¹è¯
{history}

# ç”¨æˆ·æ¶ˆæ¯
{message}
"""

        return full_prompt

    def _load_system_prompt(self) -> str:
        """åŠ è½½ç³»ç»Ÿæç¤ºè¯"""
        return "ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½QQæœºå™¨äººåŠ©æ‰‹..."

    def _get_history(self, context: dict) -> str:
        """è·å–å†å²æ¶ˆæ¯"""
        history = context.get("history", [])
        return "\n".join([f"ç”¨æˆ·: {msg}" for msg in history])
```

### 4.4 ModelRequester - AIè¯·æ±‚å™¨

è´Ÿè´£è°ƒç”¨ AI API:

```python
class ModelRequester:
    """æ¨¡å‹è¯·æ±‚å™¨"""

    def __init__(self, http_client: httpx.AsyncClient):
        self.http_client = http_client

    async def chat(self, prompt: str) -> ChatResponse:
        """è°ƒç”¨AIå¯¹è¯æ¥å£"""

        # æ„é€ è¯·æ±‚
        request = {
            "model": "gpt-4",
            "messages": [
                {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹"},
                {"role": "user", "content": prompt}
            ],
            "max_tokens": 8192,
            "temperature": 0.7
        }

        # å‘é€HTTPè¯·æ±‚
        response = await self.http_client.post(
            "https://api.openai.com/v1/chat/completions",
            json=request,
            headers={
                "Authorization": f"Bearer sk-xxxxx",
                "Content-Type": "application/json"
            }
        )

        # è§£æå“åº”
        data = response.json()
        return ChatResponse(
            text=data["choices"][0]["message"]["content"],
            tool_calls=data.get("tool_calls", [])
        )
```

### 4.5 ToolManager - å·¥å…·ç®¡ç†å™¨

ç®¡ç†å·¥å…·çš„æ‰§è¡Œ:

```python
class ToolManager:
    """å·¥å…·ç®¡ç†å™¨"""

    def __init__(
        self,
        tool_registry: ToolRegistry,
        agent_registry: AgentRegistry
    ):
        self.tool_registry = tool_registry
        self.agent_registry = agent_registry

    async def execute_tools(self, tool_calls: list) -> dict:
        """æ‰§è¡Œå·¥å…·è°ƒç”¨"""

        results = {}

        for call in tool_calls:
            tool_name = call["name"]
            arguments = call["arguments"]

            # è·å–å·¥å…·
            tool = self.tool_registry.get_tool(tool_name)

            # æ‰§è¡Œå·¥å…·
            result = await tool.execute(**arguments)

            results[tool_name] = result

        return results
```

### 4.6 å·¥å…·å®šä¹‰ç¤ºä¾‹

å¦‚ä½•å®šä¹‰ä¸€ä¸ªå·¥å…·:

```python
from Undefined.skills.tools import Tool

@tool
def get_current_time() -> str:
    """è·å–å½“å‰æ—¶é—´

    Returns:
        å½“å‰æ—¶é—´å­—ç¬¦ä¸²
    """
    from datetime import datetime
    return datetime.now().strftime("%Y-%m-%d %H:%M:%S")

@tool
def calculate(expression: str) -> str:
    """è®¡ç®—æ•°å­¦è¡¨è¾¾å¼

    Args:
        expression: æ•°å­¦è¡¨è¾¾å¼,å¦‚ "2+2*3"

    Returns:
        è®¡ç®—ç»“æœ
    """
    try:
        result = eval(expression)
        return str(result)
    except Exception as e:
        return f"è®¡ç®—é”™è¯¯: {e}"

@tool
def search_web(query: str) -> str:
    """æœç´¢ç½‘ç»œä¿¡æ¯

    Args:
        query: æœç´¢å…³é”®è¯

    Returns:
        æœç´¢ç»“æœæ‘˜è¦
    """
    # å®ç°æœç´¢é€»è¾‘
    return f"æœç´¢ {query} çš„ç»“æœ..."
```

### 4.7 AI å·¥å…·è°ƒç”¨æœºåˆ¶

**å·¥å…·è°ƒç”¨æµç¨‹**:

```
1. AI åˆ†æç”¨æˆ·æ¶ˆæ¯
    â†“
2. AI å†³å®šéœ€è¦ä½¿ç”¨å·¥å…·
    â†“
3. AI è¿”å›å·¥å…·è°ƒç”¨è¯·æ±‚
    {
        "tool_calls": [
            {
                "name": "get_current_time",
                "arguments": {}
            }
        ]
    }
    â†“
4. ToolManager æ‰§è¡Œå·¥å…·
    â†“
5. è¿”å›å·¥å…·ç»“æœ
    {
        "get_current_time": "2026-02-22 10:30:00"
    }
    â†“
6. å°†ç»“æœå‘é€å› AI
    â†“
7. AI ç”Ÿæˆæœ€ç»ˆå›å¤
```

---

## ç¬¬äº”ç« :æ¶ˆæ¯å¤„ç†æœºåˆ¶

### 5.1 æ¶ˆæ¯å¤„ç†æµç¨‹

```
æ¥æ”¶QQæ¶ˆæ¯
    â†“
OneBotClient æ¥æ”¶äº‹ä»¶
    â†“
MessageHandler.handle_message()
    â†“
åˆ¤æ–­æ¶ˆæ¯ç±»å‹
    â”œâ”€ ç§èŠæ¶ˆæ¯ â†’ handle_private()
    â”œâ”€ ç¾¤æ¶ˆæ¯ â†’ handle_group()
    â””â”€ æ‹ä¸€æ‹ â†’ handle_poke()
    â†“
è®¿é—®æ§åˆ¶æ£€æŸ¥
    â”œâ”€ ç™½åå•æ£€æŸ¥
    â””â”€ é»‘åå•æ£€æŸ¥
    â†“
å®‰å…¨æ£€æŸ¥
    â”œâ”€ æ³¨å…¥æ£€æµ‹
    â””â”€ æ•æ„Ÿè¯è¿‡æ»¤
    â†“
ä¿å­˜åˆ°å†å²
    â†“
åˆ¤æ–­å¤„ç†ç±»å‹
    â”œâ”€ å‘½ä»¤ â†’ CommandDispatcher
    â””â”€ æ™®é€šæ¶ˆæ¯ â†’ AICoordinator
    â†“
AICoordinator åè°ƒå¤„ç†
    â†“
å‘é€å›å¤
```

### 5.2 MessageHandler è¯¦è§£

```python
class MessageHandler:
    """æ¶ˆæ¯å¤„ç†å™¨"""

    def __init__(
        self,
        config: Config,
        onebot: OneBotClient,
        ai: AIClient,
        faq_storage: FAQStorage,
        task_storage: ScheduledTaskStorage,
    ):
        self.config = config
        self.onebot = onebot
        self.ai = ai

        # åˆå§‹åŒ–ç»„ä»¶
        self.history_manager = MessageHistoryManager(...)
        self.sender = MessageSender(...)
        self.security = SecurityService(...)
        self.command_dispatcher = CommandDispatcher(...)
        self.ai_coordinator = AICoordinator(...)

    async def handle_message(self, event: dict) -> None:
        """å¤„ç†æ¶ˆæ¯äº‹ä»¶"""

        post_type = event.get("post_type")

        # 1. å¤„ç†æ‹ä¸€æ‹
        if post_type == "notice" and event.get("notice_type") == "poke":
            await self._handle_poke(event)
            return

        # 2. å¤„ç†ç§èŠæ¶ˆæ¯
        if event.get("message_type") == "private":
            await self._handle_private_message(event)
            return

        # 3. å¤„ç†ç¾¤æ¶ˆæ¯
        if event.get("message_type") == "group":
            await self._handle_group_message(event)
            return

    async def _handle_private_message(self, event: dict) -> None:
        """å¤„ç†ç§èŠæ¶ˆæ¯"""

        sender_id = get_message_sender_id(event)
        message = get_message_content(event)

        # è®¿é—®æ§åˆ¶
        if not self.config.is_private_allowed(sender_id):
            return

        # å®‰å…¨æ£€æŸ¥
        if await self.security.detect_injection(message):
            return

        # ä¿å­˜å†å²
        await self.history_manager.add_private_message(...)

        # å‘é€ç»™AIå¤„ç†
        await self.ai_coordinator.handle_private_reply(...)

    async def _handle_group_message(self, event: dict) -> None:
        """å¤„ç†ç¾¤æ¶ˆæ¯"""

        group_id = event.get("group_id")
        sender_id = get_message_sender_id(event)
        message = get_message_content(event)

        # è®¿é—®æ§åˆ¶
        if not self.config.is_group_allowed(group_id):
            return

        # ä¿å­˜å†å²
        await self.history_manager.add_group_message(...)

        # æ£€æŸ¥æ˜¯å¦æ˜¯å‘½ä»¤
        if is_command(message):
            await self.command_dispatcher.dispatch(...)
            return

        # AIå¤„ç†
        await self.ai_coordinator.handle_auto_reply(...)
```

### 5.3 OneBotClient - QQåè®®è¿æ¥

```python
class OneBotClient:
    """OneBot WebSocket å®¢æˆ·ç«¯"""

    def __init__(self, ws_url: str, token: str = ""):
        self.ws_url = ws_url
        self.token = token
        self.ws = None
        self._message_handler = None

    async def connect(self) -> None:
        """è¿æ¥åˆ°OneBot WebSocket"""
        self.ws = await websockets.connect(self.ws_url)
        print("è¿æ¥æˆåŠŸ!")

    async def disconnect(self) -> None:
        """æ–­å¼€è¿æ¥"""
        if self.ws:
            await self.ws.close()

    async def send_private_message(self, user_id: int, message: str) -> None:
        """å‘é€ç§èŠæ¶ˆæ¯"""
        await self._call_api("send_private_msg", {
            "user_id": user_id,
            "message": message
        })

    async def send_group_message(self, group_id: int, message: str) -> None:
        """å‘é€ç¾¤æ¶ˆæ¯"""
        await self._call_api("send_group_msg", {
            "group_id": group_id,
            "message": message
        })

    async def _call_api(self, action: str, params: dict) -> dict:
        """è°ƒç”¨OneBot API"""
        request = {
            "action": action,
            "params": params
        }
        await self.ws.send(json.dumps(request))
        response = await self.ws.recv()
        return json.loads(response)
```

### 5.4 WebSocket åè®®

**ä»€ä¹ˆæ˜¯ WebSocket?**
- WebSocket æ˜¯ä¸€ç§å…¨åŒå·¥é€šä¿¡åè®®
- æ”¯æŒæœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ¶ˆæ¯
- é€‚åˆå®æ—¶é€šä¿¡åœºæ™¯

**é¡¹ç›®ä¸­çš„ä½¿ç”¨**:

```python
import websockets

async def connect_websocket():
    # è¿æ¥WebSocket
    async with websockets.connect("ws://127.0.0.1:3001") as ws:
        # å‘é€æ¶ˆæ¯
        await ws.send(json.dumps({"action": "get_status"}))

        # æ¥æ”¶æ¶ˆæ¯
        response = await ws.recv()
        print(response)

        # æŒç»­æ¥æ”¶
        async for message in ws:
            data = json.loads(message)
            # å¤„ç†æ¶ˆæ¯
            handle_message(data)
```

---

## ç¬¬å…­ç« :æŠ€èƒ½ç³»ç»Ÿ

### 6.1 æŠ€èƒ½ç³»ç»Ÿæ¦‚è¿°

æŠ€èƒ½ç³»ç»Ÿæ˜¯ Undefined çš„æ ¸å¿ƒç‰¹æ€§,å…è®¸è½»æ¾æ‰©å±•åŠŸèƒ½:

```
æŠ€èƒ½ç³»ç»Ÿ
â”œâ”€â”€ Tools (å·¥å…·)
â”‚   â””â”€â”€ å•ä¸€åŠŸèƒ½,å¦‚è·å–æ—¶é—´ã€è®¡ç®—
â”œâ”€â”€ Toolsets (å·¥å…·é›†)
â”‚   â””â”€â”€ ç›¸å…³å·¥å…·çš„é›†åˆ
â”œâ”€â”€ Agents (æ™ºèƒ½ä½“)
â”‚   â””â”€â”€ å…·æœ‰ç‰¹å®šèƒ½åŠ›çš„AIåŠ©æ‰‹
â””â”€â”€ Anthropic Skills
    â””â”€â”€ é¢†åŸŸçŸ¥è¯†æ³¨å…¥
```

### 6.2 ç›®å½•ç»“æ„

```
skills/
â”œâ”€â”€ tools/                 # åŸºç¡€å·¥å…·
â”‚   â”œâ”€â”€ get_current_time/
â”‚   â”‚   â””â”€â”€ tool.py
â”‚   â”œâ”€â”€ python_interpreter/
â”‚   â”‚   â””â”€â”€ tool.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ toolsets/              # å·¥å…·é›†
â”‚   â”œâ”€â”€ messages/
â”‚   â”‚   â””â”€â”€ toolset.py
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â””â”€â”€ toolset.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ agents/                # æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ search_agent/
â”‚   â”‚   â”œâ”€â”€ agent.py
â”‚   â”‚   â””â”€â”€ callable.json
â”‚   â”œâ”€â”€ code_agent/
â”‚   â”‚   â”œâ”€â”€ agent.py
â”‚   â”‚   â””â”€â”€ callable.json
â”‚   â””â”€â”€ ...
â””â”€â”€ anthropic_skills/      # Anthropic Skills
    â””â”€â”€ ...
```

### 6.3 åˆ›å»ºå·¥å…·

**æ­¥éª¤1**: åˆ›å»ºå·¥å…·ç›®å½•

```bash
mkdir -p skills/tools/my_tool
```

**æ­¥éª¤2**: åˆ›å»º `tool.py`

```python
from Undefined.skills.tools import Tool

@tool
def my_tool(param1: str, param2: int = 10) -> str:
    """æˆ‘çš„å·¥å…·

    Args:
        param1: ç¬¬ä¸€ä¸ªå‚æ•°
        param2: ç¬¬äºŒä¸ªå‚æ•°(å¯é€‰)

    Returns:
        å¤„ç†ç»“æœ
    """
    result = f"å¤„ç†ç»“æœ: {param1}, {param2}"
    return result
```

**è£…é¥°å™¨ `@tool` çš„ä½œç”¨**:
- è‡ªåŠ¨æ³¨å†Œå·¥å…·åˆ°æ³¨å†Œè¡¨
- æå–å·¥å…·æ–‡æ¡£
- ç”Ÿæˆå·¥å…·æè¿°ä¾›AIä½¿ç”¨

### 6.4 å·¥å…·é›†

å·¥å…·é›†æ˜¯ç›¸å…³å·¥å…·çš„é›†åˆ:

```python
from Undefined.skills.toolsets import Toolset, tool

class MyToolset(Toolset):
    """æˆ‘çš„å·¥å…·é›†"""

    @tool
    def function1(self, param: str) -> str:
        """åŠŸèƒ½1"""
        return f"ç»“æœ1: {param}"

    @tool
    def function2(self, a: int, b: int) -> int:
        """åŠŸèƒ½2"""
        return a + b
```

### 6.5 Agent æ™ºèƒ½ä½“

Agent æ˜¯å…·æœ‰ç‰¹å®šèƒ½åŠ›çš„AIåŠ©æ‰‹:

**åˆ›å»º Agent**:

```python
from Undefined.skills.agents import Agent

@agent(
    name="my_agent",
    description="æˆ‘çš„æ™ºèƒ½ä½“",
    tools=["tool1", "tool2"],
    max_turns=5
)
class MyAgent:
    """Agentç±»å®šä¹‰"""

    def __init__(self):
        self.conversation_history = []
```

**Agent é…ç½®æ–‡ä»¶ `callable.json`**:

```json
{
  "enabled": true,
  "description": "æˆ‘çš„æ™ºèƒ½ä½“,ä¸“é—¨å¤„ç†ç‰¹å®šä»»åŠ¡",
  "tools": ["tool1", "tool2"],
  "can_be_called_by": ["*"],
  "max_consecutive_auto_reply": 5
}
```

### 6.6 å·¥å…·æ³¨å†Œæœºåˆ¶

```python
class ToolRegistry:
    """å·¥å…·æ³¨å†Œè¡¨"""

    def __init__(self, base_dir: Path):
        self.tools: dict[str, Tool] = {}
        self.base_dir = base_dir

    def discover_tools(self):
        """è‡ªåŠ¨å‘ç°å·¥å…·"""
        # æ‰«æå·¥å…·ç›®å½•
        for tool_dir in self.base_dir.iterdir():
            if tool_dir.is_dir():
                tool_path = tool_dir / "tool.py"
                if tool_path.exists():
                    self._load_tool(tool_path)

    def get_tool(self, name: str) -> Tool:
        """è·å–å·¥å…·"""
        return self.tools.get(name)

    def list_tools(self) -> list[str]:
        """åˆ—å‡ºæ‰€æœ‰å·¥å…·"""
        return list(self.tools.keys())
```

---

## ç¬¬ä¸ƒç« :å­˜å‚¨ç³»ç»Ÿ

### 7.1 å­˜å‚¨ç³»ç»Ÿæ¦‚è¿°

```
å­˜å‚¨ç³»ç»Ÿ
â”œâ”€â”€ MessageHistory - æ¶ˆæ¯å†å²
â”œâ”€â”€ MemoryStorage - é•¿æœŸè®°å¿†
â”œâ”€â”€ FAQStorage - å¸¸è§é—®é¢˜
â”œâ”€â”€ TokenUsageStorage - Tokenç»Ÿè®¡
â”œâ”€â”€ ScheduledTaskStorage - å®šæ—¶ä»»åŠ¡
â””â”€â”€ KnowledgeBase - çŸ¥è¯†åº“
```

### 7.2 æ¶ˆæ¯å†å²

```python
class MessageHistoryManager:
    """æ¶ˆæ¯å†å²ç®¡ç†å™¨"""

    def __init__(self, max_records: int = 10000):
        self.max_records = max_records

    async def add_group_message(
        self,
        group_id: int,
        sender_id: int,
        text_content: str,
        ...
    ):
        """æ·»åŠ ç¾¤æ¶ˆæ¯"""
        history_file = f"data/history/group_{group_id}.json"

        # è¯»å–ç°æœ‰å†å²
        history = await self._load_history(history_file)

        # æ·»åŠ æ–°æ¶ˆæ¯
        history.append({
            "sender_id": sender_id,
            "content": text_content,
            "timestamp": datetime.now().isoformat()
        })

        # é™åˆ¶å†å²é•¿åº¦
        if len(history) > self.max_records:
            history = history[-self.max_records:]

        # ä¿å­˜
        await self._save_history(history_file, history)

    async def get_recent_messages(
        self,
        group_id: int,
        limit: int = 20
    ) -> list[dict]:
        """è·å–æœ€è¿‘æ¶ˆæ¯"""
        history_file = f"data/history/group_{group_id}.json"
        history = await self._load_history(history_file)
        return history[-limit:]
```

### 7.3 é•¿æœŸè®°å¿†

```python
class MemoryStorage:
    """é•¿æœŸè®°å¿†å­˜å‚¨"""

    def __init__(self, max_memories: int = 500):
        self.max_memories = max_memories
        self.file_path = "data/memory.json"

    async def add(self, content: str) -> str:
        """æ·»åŠ è®°å¿†"""
        memories = await self._load()

        # ç”ŸæˆID
        memory_id = str(uuid.uuid4())

        # æ·»åŠ è®°å¿†
        memories.append({
            "id": memory_id,
            "content": content,
            "timestamp": datetime.now().isoformat()
        })

        # å»é‡å’Œé™åˆ¶æ•°é‡
        memories = self._deduplicate(memories)
        memories = memories[-self.max_memories:]

        await self._save(memories)
        return memory_id

    async def search(self, query: str, top_k: int = 5) -> list[dict]:
        """æœç´¢è®°å¿†"""
        memories = await self._load()

        # ç®€å•çš„æ–‡æœ¬åŒ¹é…
        results = []
        for mem in memories:
            if query.lower() in mem["content"].lower():
                results.append(mem)

        return results[:top_k]
```

### 7.4 Tokenç»Ÿè®¡

```python
class TokenUsageStorage:
    """Tokenä½¿ç”¨ç»Ÿè®¡"""

    def __init__(self):
        self.file_path = "data/token_usage.jsonl"

    async def record(
        self,
        model: str,
        prompt_tokens: int,
        completion_tokens: int
    ):
        """è®°å½•Tokenä½¿ç”¨"""
        record = {
            "timestamp": datetime.now().isoformat(),
            "model": model,
            "prompt_tokens": prompt_tokens,
            "completion_tokens": completion_tokens,
            "total_tokens": prompt_tokens + completion_tokens
        }

        # è¿½åŠ åˆ°æ–‡ä»¶
        with open(self.file_path, "a", encoding="utf-8") as f:
            f.write(json.dumps(record) + "\n")

    async def get_stats(self, days: int = 7) -> dict:
        """è·å–ç»Ÿè®¡æ•°æ®"""
        # è¯»å–æœ€è¿‘Nå¤©çš„è®°å½•
        # ç»Ÿè®¡æ€»æ•°ã€å¹³å‡å€¼ç­‰
        pass
```

---

## ç¬¬å…«ç« :å·¥å…·å’Œè¾…åŠ©æ¨¡å—

### 8.1 å·¥å…·å‡½æ•°åº“

```python
# utils/common.py - é€šç”¨å·¥å…·å‡½æ•°

def extract_text(message_content: list) -> str:
    """ä»æ¶ˆæ¯å†…å®¹ä¸­æå–çº¯æ–‡æœ¬"""
    text_parts = []
    for segment in message_content:
        if segment.get("type") == "text":
            text_parts.append(segment.get("data", {}).get("text", ""))
    return "".join(text_parts)

def redact_string(s: str) -> str:
    """è„±æ•å­—ç¬¦ä¸²(éšè—æ•æ„Ÿä¿¡æ¯)"""
    # éšè—APIå¯†é’¥ç­‰
    import re
    pattern = r"sk-[a-zA-Z0-9]{20,}"
    return re.sub(pattern, "sk-***", s)
```

### 8.2 æ–‡ä»¶IOå·¥å…·

```python
# utils/io.py - å¼‚æ­¥æ–‡ä»¶æ“ä½œ

import aiofiles

async def read_json(file_path: str) -> dict:
    """è¯»å–JSONæ–‡ä»¶"""
    async with aiofiles.open(file_path, "r", encoding="utf-8") as f:
        content = await f.read()
        return json.loads(content)

async def write_json(file_path: str, data: dict):
    """å†™å…¥JSONæ–‡ä»¶"""
    async with aiofiles.open(file_path, "w", encoding="utf-8") as f:
        await f.write(json.dumps(data, ensure_ascii=False, indent=2))

async def append_line(file_path: str, line: str):
    """è¿½åŠ ä¸€è¡Œæ–‡æœ¬"""
    async with aiofiles.open(file_path, "a", encoding="utf-8") as f:
        await f.write(line + "\n")
```

### 8.3 æ—¥å¿—å·¥å…·

```python
# utils/logging.py - æ—¥å¿—å·¥å…·

from rich.logging import RichHandler
from rich.console import Console

def setup_logger(name: str, level: str = "INFO"):
    """è®¾ç½®æ—¥å¿—è®°å½•å™¨"""
    logger = logging.getLogger(name)
    logger.setLevel(getattr(logging, level))

    # Richæ§åˆ¶å°å¤„ç†å™¨
    console = Console()
    handler = RichHandler(
        console=console,
        show_time=True,
        show_path=True,
        rich_tracebacks=True
    )
    handler.setFormatter(logging.Formatter("%(message)s"))
    logger.addHandler(handler)

    return logger
```

---

## ç¬¬ä¹ç« :Pythonæ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“

### 9.1 åŸºç¡€è¯­æ³•

#### å˜é‡å’Œæ•°æ®ç±»å‹

```python
# åŸºæœ¬ç±»å‹
name = "å°æ˜"        # å­—ç¬¦ä¸²
age = 18            # æ•´æ•°
height = 1.75       # æµ®ç‚¹æ•°
is_student = True   # å¸ƒå°”å€¼

# é›†åˆç±»å‹
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]  # åˆ—è¡¨
person = {"name": "å°æ˜", "age": 18}  # å­—å…¸
numbers = {1, 2, 3, 4, 5}         # é›†åˆ
```

#### æ¡ä»¶è¯­å¥

```python
# if-elif-else
if age >= 18:
    print("æˆå¹´äºº")
elif age >= 13:
    print("é’å°‘å¹´")
else:
    print("å„¿ç«¥")

# ä¸‰å…ƒè¿ç®—ç¬¦
status = "æˆå¹´" if age >= 18 else "æœªæˆå¹´"
```

#### å¾ªç¯

```python
# forå¾ªç¯
for fruit in fruits:
    print(fruit)

# whileå¾ªç¯
count = 0
while count < 10:
    print(count)
    count += 1

# åˆ—è¡¨æ¨å¯¼å¼
squares = [x**2 for x in range(10)]
```

### 9.2 å‡½æ•°

```python
# å®šä¹‰å‡½æ•°
def greet(name: str, greeting: str = "ä½ å¥½") -> str:
    """æ‰“æ‹›å‘¼å‡½æ•°

    Args:
        name: åå­—
        greeting: é—®å€™è¯­

    Returns:
        æ‰“æ‹›å‘¼çš„å¥å­
    """
    return f"{greeting}, {name}!"

# è°ƒç”¨å‡½æ•°
result = greet("å°æ˜")
print(result)  # ä½ å¥½, å°æ˜!

result = greet("å°æ˜", "Hello")
print(result)  # Hello, å°æ˜!

# å¯å˜å‚æ•°
def sum_all(*numbers: int) -> int:
    """æ±‚å’Œ"""
    return sum(numbers)

total = sum_all(1, 2, 3, 4, 5)
print(total)  # 15

# å…³é”®å­—å‚æ•°
def create_person(name: str, **kwargs) -> dict:
    """åˆ›å»ºäººç‰©"""
    person = {"name": name}
    person.update(kwargs)
    return person

person = create_person("å°æ˜", age=18, city="åŒ—äº¬")
print(person)  # {'name': 'å°æ˜', 'age': 18, 'city': 'åŒ—äº¬'}
```

### 9.3 ç±»å’Œå¯¹è±¡

```python
# å®šä¹‰ç±»
class Person:
    """äººç‰©ç±»"""

    def __init__(self, name: str, age: int):
        """æ„é€ å‡½æ•°"""
        self.name = name  # å®ä¾‹å˜é‡
        self.age = age

    def say_hello(self) -> str:
        """æ‰“æ‹›å‘¼æ–¹æ³•"""
        return f"ä½ å¥½,æˆ‘æ˜¯{self.name},ä»Šå¹´{self.age}å²"

    def birthday(self):
        """è¿‡ç”Ÿæ—¥"""
        self.age += 1

# åˆ›å»ºå¯¹è±¡
person = Person("å°æ˜", 18)
print(person.say_hello())  # ä½ å¥½,æˆ‘æ˜¯å°æ˜,ä»Šå¹´18å²

# è°ƒç”¨æ–¹æ³•
person.birthday()
print(person.age)  # 19
```

### 9.4 å¼‚æ­¥ç¼–ç¨‹

```python
import asyncio

# å®šä¹‰å¼‚æ­¥å‡½æ•°
async def task1():
    print("ä»»åŠ¡1å¼€å§‹")
    await asyncio.sleep(2)  # ç­‰å¾…2ç§’
    print("ä»»åŠ¡1å®Œæˆ")

async def task2():
    print("ä»»åŠ¡2å¼€å§‹")
    await asyncio.sleep(1)
    print("ä»»åŠ¡2å®Œæˆ")

async def task3():
    print("ä»»åŠ¡3å¼€å§‹")
    await asyncio.sleep(3)
    print("ä»»åŠ¡3å®Œæˆ")

# ä¸²è¡Œæ‰§è¡Œ
async def main_serial():
    await task1()
    await task2()
    await task3()

asyncio.run(main_serial())
# è€—æ—¶: 2+1+3 = 6ç§’

# å¹¶å‘æ‰§è¡Œ
async def main_parallel():
    await asyncio.gather(task1(), task2(), task3())

asyncio.run(main_parallel())
# è€—æ—¶: max(2,1,3) = 3ç§’
```

### 9.5 é”™è¯¯å¤„ç†

```python
# try-except-else-finally
try:
    result = 10 / 0
except ZeroDivisionError as e:
    print(f"é™¤é›¶é”™è¯¯: {e}")
except Exception as e:
    print(f"å…¶ä»–é”™è¯¯: {e}")
else:
    print("æ²¡æœ‰é”™è¯¯")
finally:
    print("æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ")

# è‡ªå®šä¹‰å¼‚å¸¸
class MyError(Exception):
    """è‡ªå®šä¹‰å¼‚å¸¸"""
    pass

def check_age(age: int):
    if age < 0:
        raise MyError("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°")

try:
    check_age(-5)
except MyError as e:
    print(f"æ•è·åˆ°å¼‚å¸¸: {e}")
```

### 9.6 è£…é¥°å™¨

```python
# ç®€å•è£…é¥°å™¨
def log_decorator(func):
    """æ—¥å¿—è£…é¥°å™¨"""
    def wrapper(*args, **kwargs):
        print(f"è°ƒç”¨å‡½æ•°: {func.__name__}")
        result = func(*args, **kwargs)
        print(f"å‡½æ•°è¿”å›: {result}")
        return result
    return wrapper

@log_decorator
def add(a: int, b: int) -> int:
    return a + b

result = add(1, 2)
# è¾“å‡º:
# è°ƒç”¨å‡½æ•°: add
# å‡½æ•°è¿”å›: 3

# å¸¦å‚æ•°çš„è£…é¥°å™¨
def repeat(times: int):
    def decorator(func):
        def wrapper(*args, **kwargs):
            results = []
            for _ in range(times):
                result = func(*args, **kwargs)
                results.append(result)
            return results
        return wrapper
    return decorator

@repeat(times=3)
def greet(name: str) -> str:
    return f"ä½ å¥½, {name}!"

results = greet("å°æ˜")
print(results)  # ['ä½ å¥½, å°æ˜!', 'ä½ å¥½, å°æ˜!', 'ä½ å¥½, å°æ˜!']
```

### 9.7 ä¸Šä¸‹æ–‡ç®¡ç†å™¨

```python
# ä½¿ç”¨withè¯­å¥
with open("file.txt", "r") as f:
    content = f.read()
# æ–‡ä»¶è‡ªåŠ¨å…³é—­

# è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨
class Timer:
    """è®¡æ—¶å™¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""
    def __enter__(self):
        self.start = time.time()
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        elapsed = time.time() - self.start
        print(f"è€—æ—¶: {elapsed:.2f}ç§’")

# ä½¿ç”¨
with Timer():
    # æ‰§è¡Œä¸€äº›æ“ä½œ
    sum(range(1000000))
# è¾“å‡º: è€—æ—¶: 0.03ç§’
```

---

## ç¬¬åç« :å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1: åˆ›å»ºç®€å•çš„QQæœºå™¨äºº

```python
import asyncio
import websockets
import json

class SimpleQQBot:
    """ç®€å•çš„QQæœºå™¨äºº"""

    def __init__(self, ws_url: str):
        self.ws_url = ws_url

    async def connect(self):
        """è¿æ¥åˆ°OneBot"""
        async with websockets.connect(self.ws_url) as ws:
            print("å·²è¿æ¥åˆ°OneBot")

            # ç›‘å¬æ¶ˆæ¯
            async for message in ws:
                event = json.loads(message)
                await self.handle_message(event, ws)

    async def handle_message(self, event: dict, ws):
        """å¤„ç†æ¶ˆæ¯"""
        if event.get("post_type") == "message":
            user_id = event.get("user_id")
            message = event.get("raw_message")

            print(f"æ”¶åˆ°æ¶ˆæ¯: {message}")

            # ç®€å•å›å¤
            if "ä½ å¥½" in message:
                await self.send_reply(ws, user_id, "ä½ å¥½å‘€!")

    async def send_reply(self, ws, user_id: int, text: str):
        """å‘é€å›å¤"""
        response = {
            "action": "send_private_msg",
            "params": {
                "user_id": user_id,
                "message": text
            }
        }
        await ws.send(json.dumps(response))

# è¿è¡Œ
async def main():
    bot = SimpleQQBot("ws://127.0.0.1:3001")
    await bot.connect()

asyncio.run(main())
```

### ç»ƒä¹ 2: å®ç°é…ç½®ç³»ç»Ÿ

```python
import toml
from dataclasses import dataclass
from pathlib import Path

@dataclass
class BotConfig:
    """æœºå™¨äººé…ç½®"""
    bot_qq: int
    admin_qq: int
    ws_url: str

class ConfigManager:
    """é…ç½®ç®¡ç†å™¨"""

    def __init__(self, config_path: str = "config.toml"):
        self.config_path = Path(config_path)
        self.config = None

    def load(self) -> BotConfig:
        """åŠ è½½é…ç½®"""
        if not self.config_path.exists():
            raise FileNotFoundError(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {self.config_path}")

        # è¯»å–TOML
        with open(self.config_path, "r", encoding="utf-8") as f:
            data = toml.load(f)

        # è½¬æ¢ä¸ºæ•°æ®ç±»
        self.config = BotConfig(
            bot_qq=data["core"]["bot_qq"],
            admin_qq=data["core"]["admin_qq"],
            ws_url=data["onebot"]["ws_url"]
        )

        return self.config

    def save(self):
        """ä¿å­˜é…ç½®"""
        data = {
            "core": {
                "bot_qq": self.config.bot_qq,
                "admin_qq": self.config.admin_qq
            },
            "onebot": {
                "ws_url": self.config.ws_url
            }
        }

        with open(self.config_path, "w", encoding="utf-8") as f:
            toml.dump(data, f)

# ä½¿ç”¨
manager = ConfigManager()
config = manager.load()
print(f"æœºå™¨äººQQ: {config.bot_qq}")
```

### ç»ƒä¹ 3: å®ç°å·¥å…·ç³»ç»Ÿ

```python
from typing import Callable, Any
import inspect

class Tool:
    """å·¥å…·åŸºç±»"""

    def __init__(self, func: Callable):
        self.func = func
        self.name = func.__name__
        self.description = func.__doc__ or ""
        self.parameters = self._extract_parameters()

    def _extract_parameters(self) -> dict:
        """æå–å‚æ•°ä¿¡æ¯"""
        sig = inspect.signature(self.func)
        params = {}
        for name, param in sig.parameters.items():
            params[name] = {
                "type": str(param.annotation),
                "default": param.default if param.default != param.empty else None
            }
        return params

    async def execute(self, **kwargs) -> Any:
        """æ‰§è¡Œå·¥å…·"""
        return await self.func(**kwargs)

def tool(func: Callable) -> Tool:
    """å·¥å…·è£…é¥°å™¨"""
    return Tool(func)

# ä½¿ç”¨å·¥å…·è£…é¥°å™¨
@tool
def get_current_time() -> str:
    """è·å–å½“å‰æ—¶é—´"""
    from datetime import datetime
    return datetime.now().strftime("%Y-%m-%d %H:%M:%S")

@tool
def add_numbers(a: int, b: int) -> int:
    """ä¸¤ä¸ªæ•°å­—ç›¸åŠ """
    return a + b

# å·¥å…·æ³¨å†Œè¡¨
class ToolRegistry:
    """å·¥å…·æ³¨å†Œè¡¨"""

    def __init__(self):
        self.tools: dict[str, Tool] = {}

    def register(self, tool: Tool):
        """æ³¨å†Œå·¥å…·"""
        self.tools[tool.name] = tool

    def get_tool(self, name: str) -> Tool:
        """è·å–å·¥å…·"""
        return self.tools.get(name)

    def list_tools(self) -> list[str]:
        """åˆ—å‡ºæ‰€æœ‰å·¥å…·"""
        return list(self.tools.keys())

# ä½¿ç”¨
registry = ToolRegistry()
registry.register(get_current_time)
registry.register(add_numbers)

# è·å–å·¥å…·
time_tool = registry.get_tool("get_current_time")
result = time_tool.execute()
print(result)  # 2026-02-22 10:30:00

# åˆ—å‡ºå·¥å…·
print(registry.list_tools())  # ['get_current_time', 'add_numbers']
```

### ç»ƒä¹ 4: å®ç°ç®€å•çš„AIå®¢æˆ·ç«¯

```python
import httpx
import json
from typing import Optional

class SimpleAIClient:
    """ç®€å•çš„AIå®¢æˆ·ç«¯"""

    def __init__(self, api_key: str, base_url: str = "https://api.openai.com/v1"):
        self.api_key = api_key
        self.base_url = base_url
        self.client = httpx.AsyncClient()

    async def chat(
        self,
        messages: list[dict],
        model: str = "gpt-3.5-turbo",
        max_tokens: int = 1000
    ) -> str:
        """å‘é€èŠå¤©è¯·æ±‚"""
        url = f"{self.base_url}/chat/completions"

        headers = {
            "Authorization": f"Bearer {self.api_key}",
            "Content-Type": "application/json"
        }

        data = {
            "model": model,
            "messages": messages,
            "max_tokens": max_tokens
        }

        response = await self.client.post(url, json=data, headers=headers)
        result = response.json()

        return result["choices"][0]["message"]["content"]

    async def simple_chat(self, user_message: str, system_prompt: str = "") -> str:
        """ç®€å•èŠå¤©"""
        messages = []

        if system_prompt:
            messages.append({"role": "system", "content": system_prompt})

        messages.append({"role": "user", "content": user_message})

        return await self.chat(messages)

# ä½¿ç”¨
async def main():
    client = SimpleAIClient(api_key="sk-xxxxx")

    # ç®€å•å¯¹è¯
    response = await client.simple_chat(
        "ä½ å¥½!",
        system_prompt="ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„åŠ©æ‰‹"
    )
    print(f"AIå›å¤: {response}")

asyncio.run(main())
```

---

## ğŸ“ å­¦ä¹ æ€»ç»“

é€šè¿‡è¿™ä¸ªé¡¹ç›®,ä½ å­¦åˆ°äº†:

### PythonçŸ¥è¯†
âœ… åŸºç¡€è¯­æ³•(å˜é‡ã€å‡½æ•°ã€ç±»)
âœ… å¼‚æ­¥ç¼–ç¨‹(async/await)
âœ… é¢å‘å¯¹è±¡ç¼–ç¨‹
âœ… ç±»å‹æç¤º
âœ… è£…é¥°å™¨
âœ… ä¸Šä¸‹æ–‡ç®¡ç†å™¨
âœ… é”™è¯¯å¤„ç†

### å®è·µæŠ€èƒ½
âœ… é…ç½®ç®¡ç†
âœ… ç½‘ç»œç¼–ç¨‹(HTTP/WebSocket)
âœ… æ–‡ä»¶IO
âœ… æ—¥å¿—è®°å½•
âœ… AI APIè°ƒç”¨
âœ… å·¥å…·ç³»ç»Ÿè®¾è®¡

### é¡¹ç›®ç»éªŒ
âœ… æ¨¡å—åŒ–è®¾è®¡
âœ… å¼‚æ­¥æ¶æ„
âœ… é”™è¯¯å¤„ç†
âœ… ä»£ç ç»„ç»‡

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **æ·±å…¥å­¦ä¹ Python**
   - é˜…è¯»ã€Šæµç•…çš„Pythonã€‹
   - ç ”ç©¶Pythonæ ‡å‡†åº“

2. **å®è·µé¡¹ç›®**
   - ä¿®æ”¹ç°æœ‰åŠŸèƒ½
   - æ·»åŠ æ–°å·¥å…·
   - åˆ›å»ºæ–°Agent

3. **å­¦ä¹ AI**
   - äº†è§£OpenAI API
   - å­¦ä¹ Prompt Engineering
   - ç ”ç©¶Agentå¼€å‘

4. **å‚ä¸ç¤¾åŒº**
   - GitHubè´¡çŒ®ä»£ç 
   - æŠ¥å‘Šé—®é¢˜
   - åˆ†äº«ç»éªŒ

---

**ç¥ä½ å­¦ä¹ æ„‰å¿«,æˆä¸ºPythoné«˜æ‰‹!** ğŸ‰

è®°ä½:ç¼–ç¨‹æœ€é‡è¦çš„æ˜¯å®è·µ,å¤šå†™ä»£ç ,å¤šæ€è€ƒ,å¤šæ€»ç»“!

æœ‰ä»»ä½•é—®é¢˜,éšæ—¶æŸ¥é˜…æ–‡æ¡£å’Œæºç ,åŠ æ²¹! ğŸ’ª
